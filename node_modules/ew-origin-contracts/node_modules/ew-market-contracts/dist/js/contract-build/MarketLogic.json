{ "abi": [{ "constant": false, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "abortSupply", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "createDemand", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_demandId", "type": "uint256" }], "name": "getDemand", "outputs": [{ "name": "_regionId", "type": "string" }, { "name": "_dataTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_matchedPower", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_newLogic", "type": "address" }], "name": "update", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getSupplyStruct", "outputs": [{ "components": [{ "name": "assetId", "type": "uint256[]" }, { "name": "regionId", "type": "string" }, { "name": "dateTimeFrom", "type": "uint256" }, { "name": "dateTimeTo", "type": "uint256" }, { "name": "power", "type": "uint256" }, { "name": "baselinePower", "type": "uint256" }, { "name": "matchedPower", "type": "uint256" }, { "name": "price", "type": "uint256" }], "name": "", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllAgreementListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getDemandForAgreement", "outputs": [{ "name": "_demandId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "userContractLookup", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_supplyId", "type": "uint256[]" }], "name": "createAgreement", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_assetId", "type": "uint256[]" }, { "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_baselinePower", "type": "uint256" }, { "name": "_price", "type": "uint256" }], "name": "createSupply", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "db", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getAgreement", "outputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_supplyIds", "type": "uint256[]" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "setDemandMatchedPower", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getDemandForAgreementPublic", "outputs": [{ "name": "_demandId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllSupplyListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "assetContractLookup", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getAgreementForSupplyPublic", "outputs": [{ "name": "_agreementId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_newOwner", "type": "address" }], "name": "changeOwner", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getAgreementForSupply", "outputs": [{ "name": "_agreementId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_role", "type": "uint8" }, { "name": "_caller", "type": "address" }], "name": "isRole", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getAgreementStruct", "outputs": [{ "components": [{ "name": "demandId", "type": "uint256" }, { "name": "supplyId", "type": "uint256[]" }], "name": "", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_supplyId", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "setSupplyMatchedPower", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_database", "type": "address" }, { "name": "_admin", "type": "address" }], "name": "init", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getSupply", "outputs": [{ "name": "_assetId", "type": "uint256[]" }, { "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_baselinePower", "type": "uint256" }, { "name": "_matchedPower", "type": "uint256" }, { "name": "_price", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllDemandListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_assetContractLookup", "type": "address" }, { "name": "_marketContractLookup", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_sender", "type": "address" }, { "indexed": true, "name": "_demandId", "type": "uint256" }], "name": "createdNewDemand", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_sender", "type": "address" }, { "indexed": true, "name": "_supplyId", "type": "uint256" }], "name": "createdNewSupply", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "_agreementId", "type": "uint256" }, { "indexed": true, "name": "_demandId", "type": "uint256" }, { "indexed": true, "name": "_supplyId", "type": "uint256" }], "name": "LogAgreementFullySigned", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "_agreementId", "type": "uint256" }, { "indexed": true, "name": "_demandId", "type": "uint256" }], "name": "LogAgreementCreated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_newOwner", "type": "address" }], "name": "LogChangeOwner", "type": "event" }], "bytecode": "60806040523480156200001157600080fd5b5060405160408062002de083398101806040526200003391908101906200015b565b818181600160a060020a0316635c7460d66040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156200008b57600080fd5b505afa158015620000a0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620000c6919081019062000132565b60008054600160a060020a03938416600160a060020a03199182161790915560018054928416928216929092179091556003805493909216921691909117905550620001c69050565b60006200011d82516200019a565b9392505050565b60006200011d8251620001ad565b6000602082840312156200014557600080fd5b60006200015384846200010f565b949350505050565b600080604083850312156200016f57600080fd5b60006200017d858562000124565b9250506020620001908582860162000124565b9150509250929050565b6000620001a782620001ba565b92915050565b6000620001a7826200019a565b600160a060020a031690565b612c0a80620001d66000396000f3fe608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063610b350f116100f2578063b3dfe5d51161009b578063e182fb7411610075578063e182fb741461037c578063f09a40161461038f578063f77ee79d146103a2578063f9e170db146103c9576101b2565b8063b3dfe5d514610329578063bb5a389e1461033c578063da119ed11461035c576101b2565b80638da5cb5b116100cc5780638da5cb5b146102ee5780639a525f0d14610303578063a6f9dae114610316576101b2565b8063610b350f14610254578063639decca146102de5780636c608004146102e6576101b2565b8063412a68d61161015f5780634988a23d116101395780634988a23d1461028f5780634d655aff146102a25780634f9f6fe6146102aa5780635266ddaa146102cb576101b2565b8063412a68d61461025457806344724c8c1461026757806345993e211461027c576101b2565b80631c1b8772116101905780631c1b87721461020c5780631df954bd1461021f57806323dc20731461023f576101b2565b806307800d3f146101b757806317fe7eb5146101cc5780631ac2733c146101df575b600080fd5b6101ca6101c5366004612347565b6103d1565b005b6101ca6101da36600461220d565b610671565b6101f26101ed366004612347565b61078c565b604051610203959493929190612955565b60405180910390f35b6101ca61021a3660046120a5565b610862565b61023261022d366004612347565b610912565b6040516102039190612a27565b6102476109bd565b6040516102039190612a38565b610247610262366004612347565b610a58565b61026f610b07565b60405161020391906128f4565b6101ca61028a366004612383565b610b16565b6101ca61029d366004612123565b610d95565b61026f610f9e565b6102bd6102b8366004612347565b610fad565b604051610203929190612a61565b6101ca6102d93660046123cb565b611069565b6102476111d5565b61026f611233565b6102f6611242565b60405161020391906127de565b610247610311366004612347565b611251565b6101ca6103243660046120a5565b611327565b610247610337366004612347565b6113ec565b61034f61034a3660046121ee565b6114cb565b60405161020391906128e6565b61036f61036a366004612347565b6115f6565b6040516102039190612a16565b6101ca61038a3660046123cb565b61169b565b6101ca61039d3660046120e9565b6119dd565b6103b56103b0366004612347565b611a70565b60405161020398979695949392919061287d565b610247611b67565b6103d9611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590610422908590600401612a38565b604080518083038186803b15801561043957600080fd5b505afa15801561044d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061047191908101906122f4565b6020810151909150156104a757604051600080516020612bb1833981519152815260040161049e906129b6565b60405180910390fd5b6104af611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f8908690600401612a38565b60006040518083038186803b15801561051057600080fd5b505afa158015610524573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054c9190810190612312565b905060005b81515181101561066b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ac57600080fd5b505afa1580156105c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e491908101906120cb565b600160a060020a031663d657c9b283600001518381518110151561060457fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062d9190612a38565b600060405180830381600087803b15801561064757600080fd5b505af115801561065b573d6000803e3d6000fd5b5050600190920191506105519050565b50505050565b600461067d81336114cb565b15156106a357604051600080516020612bb1833981519152815260040161049e906129c6565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a906106f7908a908a908a908a908a908990600401612902565b602060405180830381600087803b15801561071157600080fd5b505af1158015610725573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107499190810190612365565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c3957253360405161077b91906127ec565b60405180910390a250505050505050565b606060008060008061079c611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906107e5908a90600401612a38565b60006040518083038186803b1580156107fd57600080fd5b505afa158015610811573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261083991908101906122bf565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a0316331461089457604051600080516020612bb1833981519152815260040161049e906129d6565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae1906108dd9084906004016127de565b600060405180830381600087803b1580156108f757600080fd5b505af115801561090b573d6000803e3d6000fd5b5050505050565b61091a611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610963908590600401612a38565b60006040518083038186803b15801561097b57600080fd5b505afa15801561098f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b79190810190612312565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610a1b57600080fd5b505afa158015610a2f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610a539190810190612365565b905090565b6000610a62611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610aab908690600401612a38565b60006040518083038186803b158015610ac357600080fd5b505afa158015610ad7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610aff919081019061228a565b519392505050565b600154600160a060020a031681565b6002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610b629086908690600401612a61565b602060405180830381600087803b158015610b7c57600080fd5b505af1158015610b90573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb49190810190612365565b905060005b825181101561066b57610bca611bdc565b6002548451600160a060020a039091169063f77ee79d90869085908110610bed57fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610c169190612a38565b60006040518083038186803b158015610c2e57600080fd5b505afa158015610c42573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610c6a9190810190612312565b905060005b815151811015610d8b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610cca57600080fd5b505afa158015610cde573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d0291908101906120cb565b600160a060020a03166380c5ccc7836000015183815181101515610d2257fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610d4d929190612a46565b600060405180830381600087803b158015610d6757600080fd5b505af1158015610d7b573d6000803e3d6000fd5b505060019092019150610c6f9050565b5050600101610bb9565b6002546040517f011a1996000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063011a199690610ded908b908b908b908b908b908b908a908c906004016127fa565b602060405180830381600087803b158015610e0757600080fd5b505af1158015610e1b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e3f9190810190612365565b905060005b8851811015610f5b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610e9e57600080fd5b505afa158015610eb2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610ed691908101906120cb565b600160a060020a03166358c0dd608a83815181101515610ef257fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401610f1d929190612a81565b600060405180830381600087803b158015610f3757600080fd5b505af1158015610f4b573d6000803e3d6000fd5b505060019092019150610e449050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd33604051610f8c91906127ec565b60405180910390a25050505050505050565b600254600160a060020a031681565b60006060610fb9611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611002908790600401612a38565b60006040518083038186803b15801561101a57600080fd5b505afa15801561102e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611056919081019061228a565b8051602090910151909590945092505050565b611071611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906110ba908690600401612a38565b60006040518083038186803b1580156110d257600080fd5b505afa1580156110e6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261110e91908101906122bf565b6080810151909150828101101561112157fe5b606081015160808201518301111561115357604051600080516020612bb1833981519152815260040161049e906129f6565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa9061119e9086908690600401612a81565b600060405180830381600087803b1580156111b857600080fd5b505af11580156111cc573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610a1b57600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b600061125b611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906112a4908690600401612a38565b604080518083038186803b1580156112bb57600080fd5b505afa1580156112cf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506112f391908101906122f4565b90508060200151151561132057604051600080516020612bb1833981519152815260040161049e906129e6565b5192915050565b600054600160a060020a0316331461135957604051600080516020612bb1833981519152815260040161049e906129d6565b600160a060020a038116151561138957604051600080516020612bb1833981519152815260040161049e906129a6565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16906113e19083906127de565b60405180910390a150565b60006113f6611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d59061143f908690600401612a38565b604080518083038186803b15801561145657600080fd5b505afa15801561146a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061148e91908101906122f4565b9050806020015115156114bb57604051600080516020612bb1833981519152815260040161049e906129e6565b6114c483611251565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561151f57600080fd5b505afa158015611533573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061155791908101906120cb565b600160a060020a031663265209f2846040518263ffffffff1660e060020a02815260040161158591906127de565b60206040518083038186803b15801561159d57600080fd5b505afa1580156115b1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115d59190810190612365565b905060008460058111156115e557fe5b60020a919091161515949350505050565b6115fe611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611647908590600401612a38565b60006040518083038186803b15801561165f57600080fd5b505afa158015611673573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b7919081019061228a565b6116a3611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906116ec908690600401612a38565b60006040518083038186803b15801561170457600080fd5b505afa158015611718573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526117409190810190612312565b60c0810151909150828101101561175357fe5b600061175e84611251565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec4656906117ad908590600401612a38565b60006040518083038186803b1580156117c557600080fd5b505afa1580156117d9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611801919081019061228a565b51905061180c611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90611855908590600401612a38565b60006040518083038186803b15801561186d57600080fd5b505afa158015611881573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526118a991908101906122bf565b6080810151606082015191925090038581106119475760025460c08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb7491611910918b918b0190600401612a81565b600060405180830381600087803b15801561192a57600080fd5b505af115801561193e573d6000803e3d6000fd5b505050506111cc565b60025460c08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb74916119a0918d91860190600401612a81565b600060405180830381600087803b1580156119ba57600080fd5b505af11580156119ce573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a03163314611a0f57604051600080516020612bb1833981519152815260040161049e906129d6565b600254600160a060020a031615611a4057604051600080516020612bb1833981519152815260040161049e90612a06565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b606080600080600080600080611a84611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611acd908d90600401612a38565b60006040518083038186803b158015611ae557600080fd5b505afa158015611af9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611b219190810190612312565b905080600001519850806020015197508060400151965080606001519550806080015194508060a0015193508060c0015192508060e00151915050919395975091939597565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610a1b57600080fd5b604080518082019091526000808252602082015290565b6101006040519081016040528060608152602001606081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b60006114c48235612b1f565b60006114c48251612b1f565b6000601f82018313611c9357600080fd5b8151611ca6611ca182612ac3565b612a9c565b91508181835260208401935060208101905083856020840282011115611ccb57600080fd5b60005b83811015611cf75781611ce18882612099565b8452506020928301929190910190600101611cce565b5050505092915050565b6000601f82018313611d1257600080fd5b8135611d20611ca182612ac3565b91508181835260208401935060208101905083856020840282011115611d4557600080fd5b60005b83811015611cf75781611d5b888261208d565b8452506020928301929190910190600101611d48565b60006114c48251612b2a565b60006114c48235612b3e565b600080601f83018413611d9b57600080fd5b50813567ffffffffffffffff811115611db357600080fd5b602083019150836001820283011115611dcb57600080fd5b9250929050565b6000601f82018313611de357600080fd5b8151611df1611ca182612ae4565b91508082526020830160208301858383011115611e0d57600080fd5b611e18838284612b7a565b50505092915050565b6000601f82018313611e3257600080fd5b8135611e40611ca182612ae4565b91508082526020830160208301858383011115611e5c57600080fd5b611e18838284612b6e565b600060408284031215611e7957600080fd5b611e836040612a9c565b90506000611e918484612099565b825250602082015167ffffffffffffffff811115611eae57600080fd5b611eba84828501611c82565b60208301525092915050565b600060a08284031215611ed857600080fd5b611ee260a0612a9c565b825190915067ffffffffffffffff811115611efc57600080fd5b611f0884828501611dd2565b8252506020611f1984848301612099565b6020830152506040611f2d84828501612099565b6040830152506060611f4184828501612099565b6060830152506080611f5584828501612099565b60808301525092915050565b600060408284031215611f7357600080fd5b611f7d6040612a9c565b90506000611f8b8484612099565b8252506020611eba84848301611d71565b60006101008284031215611faf57600080fd5b611fba610100612a9c565b825190915067ffffffffffffffff811115611fd457600080fd5b611fe084828501611c82565b825250602082015167ffffffffffffffff811115611ffd57600080fd5b61200984828501611dd2565b602083015250604061201d84828501612099565b604083015250606061203184828501612099565b606083015250608061204584828501612099565b60808301525060a061205984828501612099565b60a08301525060c061206d84828501612099565b60c08301525060e061208184828501612099565b60e08301525092915050565b60006114c48235612b3b565b60006114c48251612b3b565b6000602082840312156120b757600080fd5b60006120c38484611c6a565b949350505050565b6000602082840312156120dd57600080fd5b60006120c38484611c76565b600080604083850312156120fc57600080fd5b60006121088585611c6a565b925050602061211985828601611c6a565b9150509250929050565b600080600080600080600060e0888a03121561213e57600080fd5b873567ffffffffffffffff81111561215557600080fd5b6121618a828b01611d01565b975050602088013567ffffffffffffffff81111561217e57600080fd5b61218a8a828b01611e21565b965050604061219b8a828b0161208d565b95505060606121ac8a828b0161208d565b94505060806121bd8a828b0161208d565b93505060a06121ce8a828b0161208d565b92505060c06121df8a828b0161208d565b91505092959891949750929550565b6000806040838503121561220157600080fd5b60006121088585611d7d565b60008060008060006080868803121561222557600080fd5b853567ffffffffffffffff81111561223c57600080fd5b61224888828901611d89565b9550955050602061225b8882890161208d565b935050604061226c8882890161208d565b925050606061227d8882890161208d565b9150509295509295909350565b60006020828403121561229c57600080fd5b815167ffffffffffffffff8111156122b357600080fd5b6120c384828501611e67565b6000602082840312156122d157600080fd5b815167ffffffffffffffff8111156122e857600080fd5b6120c384828501611ec6565b60006040828403121561230657600080fd5b60006120c38484611f61565b60006020828403121561232457600080fd5b815167ffffffffffffffff81111561233b57600080fd5b6120c384828501611f9c565b60006020828403121561235957600080fd5b60006120c3848461208d565b60006020828403121561237757600080fd5b60006120c38484612099565b6000806040838503121561239657600080fd5b60006123a2858561208d565b925050602083013567ffffffffffffffff8111156123bf57600080fd5b61211985828601611d01565b600080604083850312156123de57600080fd5b60006123ea858561208d565b92505060206121198582860161208d565b600061240783836127d5565b505060200190565b61241881612b51565b82525050565b61241881612b1f565b600061243282612b12565b61243c8185612b16565b935061244783612b0c565b60005b828110156124725761245d8683516123fb565b955061246882612b0c565b915060010161244a565b5093949350505050565b600061248782612b12565b6124918185612b16565b935061249c83612b0c565b60005b82811015612472576124b28683516123fb565b95506124bd82612b0c565b915060010161249f565b61241881612b2a565b61241881612b58565b61241881612b63565b60006124ee8385612b16565b93506124fb838584612b6e565b61250483612ba6565b9093019392505050565b600061251982612b12565b6125238185612b16565b9350612533818560208601612b7a565b61250481612ba6565b6000612549601883612b16565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b6000612582601d83612b16565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b60006125bb602483612b16565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b600061261a601783612b16565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b6000612653601283612b16565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b600061268c601983612b16565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b60006126c5601883612b16565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b8051600090604084019061270585826127d5565b506020830151848203602086015261271d828261247c565b95945050505050565b80516101008084526000919084019061273f828261247c565b91505060208301518482036020860152612759828261250e565b915050604083015161276e60408601826127d5565b50606083015161278160608601826127d5565b50608083015161279460808601826127d5565b5060a08301516127a760a08601826127d5565b5060c08301516127ba60c08601826127d5565b5060e08301516127cd60e08601826127d5565b509392505050565b61241881612b3b565b602081016109b7828461241e565b602081016109b7828461240f565b610100808252810161280c818b612427565b90508181036020830152612820818a61250e565b905061282f60408301896127d5565b61283c60608301886127d5565b61284960808301876127d5565b61285660a08301866127d5565b61286360c08301856124d9565b61287060e08301846127d5565b9998505050505050505050565b610100808252810161288f818b612427565b905081810360208301526128a3818a61250e565b90506128b260408301896127d5565b6128bf60608301886127d5565b6128cc60808301876127d5565b6128d960a08301866127d5565b61286360c08301856127d5565b602081016109b782846124c7565b602081016109b782846124d0565b60a0808252810161291481888a6124e2565b905061292360208301876127d5565b61293060408301866127d5565b61293d60608301856127d5565b61294a60808301846124d9565b979650505050505050565b60a08082528101612966818861250e565b905061297560208301876127d5565b61298260408301866127d5565b61298f60608301856127d5565b61299c60808301846127d5565b9695505050505050565b602080825281016109b78161253c565b602080825281016109b781612575565b602080825281016109b7816125ae565b602080825281016109b78161260d565b602080825281016109b781612646565b602080825281016109b78161267f565b602080825281016109b7816126b8565b602080825281016114c481846126f1565b602080825281016114c48184612726565b602081016109b782846127d5565b60408101612a5482856127d5565b6114c4602083018461240f565b60408101612a6f82856127d5565b81810360208301526120c38184612427565b60408101612a8f82856127d5565b6114c460208301846127d5565b60405181810167ffffffffffffffff81118282101715612abb57600080fd5b604052919050565b600067ffffffffffffffff821115612ada57600080fd5b5060209081020190565b600067ffffffffffffffff821115612afb57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b60006109b782612b2f565b151590565b600160a060020a031690565b90565b600060068210612b4d57600080fd5b5090565b60006109b7825b60006109b782612b1f565b60006109b782612b3b565b82818337506000910152565b60005b83811015612b95578181015183820152602001612b7d565b8381111561066b5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a723058204b59e9a88e70d0c103eeb8a5411fcf73c9e1c6ffcd9d4bc8f9138e90a8e02e0a6c6578706572696d656e74616cf50037", "contractName": "MarketLogic", "deployedBytecode": "608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063610b350f116100f2578063b3dfe5d51161009b578063e182fb7411610075578063e182fb741461037c578063f09a40161461038f578063f77ee79d146103a2578063f9e170db146103c9576101b2565b8063b3dfe5d514610329578063bb5a389e1461033c578063da119ed11461035c576101b2565b80638da5cb5b116100cc5780638da5cb5b146102ee5780639a525f0d14610303578063a6f9dae114610316576101b2565b8063610b350f14610254578063639decca146102de5780636c608004146102e6576101b2565b8063412a68d61161015f5780634988a23d116101395780634988a23d1461028f5780634d655aff146102a25780634f9f6fe6146102aa5780635266ddaa146102cb576101b2565b8063412a68d61461025457806344724c8c1461026757806345993e211461027c576101b2565b80631c1b8772116101905780631c1b87721461020c5780631df954bd1461021f57806323dc20731461023f576101b2565b806307800d3f146101b757806317fe7eb5146101cc5780631ac2733c146101df575b600080fd5b6101ca6101c5366004612347565b6103d1565b005b6101ca6101da36600461220d565b610671565b6101f26101ed366004612347565b61078c565b604051610203959493929190612955565b60405180910390f35b6101ca61021a3660046120a5565b610862565b61023261022d366004612347565b610912565b6040516102039190612a27565b6102476109bd565b6040516102039190612a38565b610247610262366004612347565b610a58565b61026f610b07565b60405161020391906128f4565b6101ca61028a366004612383565b610b16565b6101ca61029d366004612123565b610d95565b61026f610f9e565b6102bd6102b8366004612347565b610fad565b604051610203929190612a61565b6101ca6102d93660046123cb565b611069565b6102476111d5565b61026f611233565b6102f6611242565b60405161020391906127de565b610247610311366004612347565b611251565b6101ca6103243660046120a5565b611327565b610247610337366004612347565b6113ec565b61034f61034a3660046121ee565b6114cb565b60405161020391906128e6565b61036f61036a366004612347565b6115f6565b6040516102039190612a16565b6101ca61038a3660046123cb565b61169b565b6101ca61039d3660046120e9565b6119dd565b6103b56103b0366004612347565b611a70565b60405161020398979695949392919061287d565b610247611b67565b6103d9611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590610422908590600401612a38565b604080518083038186803b15801561043957600080fd5b505afa15801561044d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061047191908101906122f4565b6020810151909150156104a757604051600080516020612bb1833981519152815260040161049e906129b6565b60405180910390fd5b6104af611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f8908690600401612a38565b60006040518083038186803b15801561051057600080fd5b505afa158015610524573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054c9190810190612312565b905060005b81515181101561066b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ac57600080fd5b505afa1580156105c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e491908101906120cb565b600160a060020a031663d657c9b283600001518381518110151561060457fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062d9190612a38565b600060405180830381600087803b15801561064757600080fd5b505af115801561065b573d6000803e3d6000fd5b5050600190920191506105519050565b50505050565b600461067d81336114cb565b15156106a357604051600080516020612bb1833981519152815260040161049e906129c6565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a906106f7908a908a908a908a908a908990600401612902565b602060405180830381600087803b15801561071157600080fd5b505af1158015610725573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107499190810190612365565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c3957253360405161077b91906127ec565b60405180910390a250505050505050565b606060008060008061079c611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906107e5908a90600401612a38565b60006040518083038186803b1580156107fd57600080fd5b505afa158015610811573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261083991908101906122bf565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a0316331461089457604051600080516020612bb1833981519152815260040161049e906129d6565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae1906108dd9084906004016127de565b600060405180830381600087803b1580156108f757600080fd5b505af115801561090b573d6000803e3d6000fd5b5050505050565b61091a611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610963908590600401612a38565b60006040518083038186803b15801561097b57600080fd5b505afa15801561098f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b79190810190612312565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610a1b57600080fd5b505afa158015610a2f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610a539190810190612365565b905090565b6000610a62611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610aab908690600401612a38565b60006040518083038186803b158015610ac357600080fd5b505afa158015610ad7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610aff919081019061228a565b519392505050565b600154600160a060020a031681565b6002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610b629086908690600401612a61565b602060405180830381600087803b158015610b7c57600080fd5b505af1158015610b90573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb49190810190612365565b905060005b825181101561066b57610bca611bdc565b6002548451600160a060020a039091169063f77ee79d90869085908110610bed57fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610c169190612a38565b60006040518083038186803b158015610c2e57600080fd5b505afa158015610c42573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610c6a9190810190612312565b905060005b815151811015610d8b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610cca57600080fd5b505afa158015610cde573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d0291908101906120cb565b600160a060020a03166380c5ccc7836000015183815181101515610d2257fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610d4d929190612a46565b600060405180830381600087803b158015610d6757600080fd5b505af1158015610d7b573d6000803e3d6000fd5b505060019092019150610c6f9050565b5050600101610bb9565b6002546040517f011a1996000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063011a199690610ded908b908b908b908b908b908b908a908c906004016127fa565b602060405180830381600087803b158015610e0757600080fd5b505af1158015610e1b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e3f9190810190612365565b905060005b8851811015610f5b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610e9e57600080fd5b505afa158015610eb2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610ed691908101906120cb565b600160a060020a03166358c0dd608a83815181101515610ef257fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401610f1d929190612a81565b600060405180830381600087803b158015610f3757600080fd5b505af1158015610f4b573d6000803e3d6000fd5b505060019092019150610e449050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd33604051610f8c91906127ec565b60405180910390a25050505050505050565b600254600160a060020a031681565b60006060610fb9611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611002908790600401612a38565b60006040518083038186803b15801561101a57600080fd5b505afa15801561102e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611056919081019061228a565b8051602090910151909590945092505050565b611071611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906110ba908690600401612a38565b60006040518083038186803b1580156110d257600080fd5b505afa1580156110e6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261110e91908101906122bf565b6080810151909150828101101561112157fe5b606081015160808201518301111561115357604051600080516020612bb1833981519152815260040161049e906129f6565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa9061119e9086908690600401612a81565b600060405180830381600087803b1580156111b857600080fd5b505af11580156111cc573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610a1b57600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b600061125b611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906112a4908690600401612a38565b604080518083038186803b1580156112bb57600080fd5b505afa1580156112cf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506112f391908101906122f4565b90508060200151151561132057604051600080516020612bb1833981519152815260040161049e906129e6565b5192915050565b600054600160a060020a0316331461135957604051600080516020612bb1833981519152815260040161049e906129d6565b600160a060020a038116151561138957604051600080516020612bb1833981519152815260040161049e906129a6565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16906113e19083906127de565b60405180910390a150565b60006113f6611bc5565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d59061143f908690600401612a38565b604080518083038186803b15801561145657600080fd5b505afa15801561146a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061148e91908101906122f4565b9050806020015115156114bb57604051600080516020612bb1833981519152815260040161049e906129e6565b6114c483611251565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561151f57600080fd5b505afa158015611533573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061155791908101906120cb565b600160a060020a031663265209f2846040518263ffffffff1660e060020a02815260040161158591906127de565b60206040518083038186803b15801561159d57600080fd5b505afa1580156115b1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115d59190810190612365565b905060008460058111156115e557fe5b60020a919091161515949350505050565b6115fe611c52565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611647908590600401612a38565b60006040518083038186803b15801561165f57600080fd5b505afa158015611673573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b7919081019061228a565b6116a3611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906116ec908690600401612a38565b60006040518083038186803b15801561170457600080fd5b505afa158015611718573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526117409190810190612312565b60c0810151909150828101101561175357fe5b600061175e84611251565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec4656906117ad908590600401612a38565b60006040518083038186803b1580156117c557600080fd5b505afa1580156117d9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611801919081019061228a565b51905061180c611c22565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90611855908590600401612a38565b60006040518083038186803b15801561186d57600080fd5b505afa158015611881573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526118a991908101906122bf565b6080810151606082015191925090038581106119475760025460c08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb7491611910918b918b0190600401612a81565b600060405180830381600087803b15801561192a57600080fd5b505af115801561193e573d6000803e3d6000fd5b505050506111cc565b60025460c08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb74916119a0918d91860190600401612a81565b600060405180830381600087803b1580156119ba57600080fd5b505af11580156119ce573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a03163314611a0f57604051600080516020612bb1833981519152815260040161049e906129d6565b600254600160a060020a031615611a4057604051600080516020612bb1833981519152815260040161049e90612a06565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b606080600080600080600080611a84611bdc565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611acd908d90600401612a38565b60006040518083038186803b158015611ae557600080fd5b505afa158015611af9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611b219190810190612312565b905080600001519850806020015197508060400151965080606001519550806080015194508060a0015193508060c0015192508060e00151915050919395975091939597565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610a1b57600080fd5b604080518082019091526000808252602082015290565b6101006040519081016040528060608152602001606081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b60006114c48235612b1f565b60006114c48251612b1f565b6000601f82018313611c9357600080fd5b8151611ca6611ca182612ac3565b612a9c565b91508181835260208401935060208101905083856020840282011115611ccb57600080fd5b60005b83811015611cf75781611ce18882612099565b8452506020928301929190910190600101611cce565b5050505092915050565b6000601f82018313611d1257600080fd5b8135611d20611ca182612ac3565b91508181835260208401935060208101905083856020840282011115611d4557600080fd5b60005b83811015611cf75781611d5b888261208d565b8452506020928301929190910190600101611d48565b60006114c48251612b2a565b60006114c48235612b3e565b600080601f83018413611d9b57600080fd5b50813567ffffffffffffffff811115611db357600080fd5b602083019150836001820283011115611dcb57600080fd5b9250929050565b6000601f82018313611de357600080fd5b8151611df1611ca182612ae4565b91508082526020830160208301858383011115611e0d57600080fd5b611e18838284612b7a565b50505092915050565b6000601f82018313611e3257600080fd5b8135611e40611ca182612ae4565b91508082526020830160208301858383011115611e5c57600080fd5b611e18838284612b6e565b600060408284031215611e7957600080fd5b611e836040612a9c565b90506000611e918484612099565b825250602082015167ffffffffffffffff811115611eae57600080fd5b611eba84828501611c82565b60208301525092915050565b600060a08284031215611ed857600080fd5b611ee260a0612a9c565b825190915067ffffffffffffffff811115611efc57600080fd5b611f0884828501611dd2565b8252506020611f1984848301612099565b6020830152506040611f2d84828501612099565b6040830152506060611f4184828501612099565b6060830152506080611f5584828501612099565b60808301525092915050565b600060408284031215611f7357600080fd5b611f7d6040612a9c565b90506000611f8b8484612099565b8252506020611eba84848301611d71565b60006101008284031215611faf57600080fd5b611fba610100612a9c565b825190915067ffffffffffffffff811115611fd457600080fd5b611fe084828501611c82565b825250602082015167ffffffffffffffff811115611ffd57600080fd5b61200984828501611dd2565b602083015250604061201d84828501612099565b604083015250606061203184828501612099565b606083015250608061204584828501612099565b60808301525060a061205984828501612099565b60a08301525060c061206d84828501612099565b60c08301525060e061208184828501612099565b60e08301525092915050565b60006114c48235612b3b565b60006114c48251612b3b565b6000602082840312156120b757600080fd5b60006120c38484611c6a565b949350505050565b6000602082840312156120dd57600080fd5b60006120c38484611c76565b600080604083850312156120fc57600080fd5b60006121088585611c6a565b925050602061211985828601611c6a565b9150509250929050565b600080600080600080600060e0888a03121561213e57600080fd5b873567ffffffffffffffff81111561215557600080fd5b6121618a828b01611d01565b975050602088013567ffffffffffffffff81111561217e57600080fd5b61218a8a828b01611e21565b965050604061219b8a828b0161208d565b95505060606121ac8a828b0161208d565b94505060806121bd8a828b0161208d565b93505060a06121ce8a828b0161208d565b92505060c06121df8a828b0161208d565b91505092959891949750929550565b6000806040838503121561220157600080fd5b60006121088585611d7d565b60008060008060006080868803121561222557600080fd5b853567ffffffffffffffff81111561223c57600080fd5b61224888828901611d89565b9550955050602061225b8882890161208d565b935050604061226c8882890161208d565b925050606061227d8882890161208d565b9150509295509295909350565b60006020828403121561229c57600080fd5b815167ffffffffffffffff8111156122b357600080fd5b6120c384828501611e67565b6000602082840312156122d157600080fd5b815167ffffffffffffffff8111156122e857600080fd5b6120c384828501611ec6565b60006040828403121561230657600080fd5b60006120c38484611f61565b60006020828403121561232457600080fd5b815167ffffffffffffffff81111561233b57600080fd5b6120c384828501611f9c565b60006020828403121561235957600080fd5b60006120c3848461208d565b60006020828403121561237757600080fd5b60006120c38484612099565b6000806040838503121561239657600080fd5b60006123a2858561208d565b925050602083013567ffffffffffffffff8111156123bf57600080fd5b61211985828601611d01565b600080604083850312156123de57600080fd5b60006123ea858561208d565b92505060206121198582860161208d565b600061240783836127d5565b505060200190565b61241881612b51565b82525050565b61241881612b1f565b600061243282612b12565b61243c8185612b16565b935061244783612b0c565b60005b828110156124725761245d8683516123fb565b955061246882612b0c565b915060010161244a565b5093949350505050565b600061248782612b12565b6124918185612b16565b935061249c83612b0c565b60005b82811015612472576124b28683516123fb565b95506124bd82612b0c565b915060010161249f565b61241881612b2a565b61241881612b58565b61241881612b63565b60006124ee8385612b16565b93506124fb838584612b6e565b61250483612ba6565b9093019392505050565b600061251982612b12565b6125238185612b16565b9350612533818560208601612b7a565b61250481612ba6565b6000612549601883612b16565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b6000612582601d83612b16565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b60006125bb602483612b16565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b600061261a601783612b16565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b6000612653601283612b16565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b600061268c601983612b16565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b60006126c5601883612b16565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b8051600090604084019061270585826127d5565b506020830151848203602086015261271d828261247c565b95945050505050565b80516101008084526000919084019061273f828261247c565b91505060208301518482036020860152612759828261250e565b915050604083015161276e60408601826127d5565b50606083015161278160608601826127d5565b50608083015161279460808601826127d5565b5060a08301516127a760a08601826127d5565b5060c08301516127ba60c08601826127d5565b5060e08301516127cd60e08601826127d5565b509392505050565b61241881612b3b565b602081016109b7828461241e565b602081016109b7828461240f565b610100808252810161280c818b612427565b90508181036020830152612820818a61250e565b905061282f60408301896127d5565b61283c60608301886127d5565b61284960808301876127d5565b61285660a08301866127d5565b61286360c08301856124d9565b61287060e08301846127d5565b9998505050505050505050565b610100808252810161288f818b612427565b905081810360208301526128a3818a61250e565b90506128b260408301896127d5565b6128bf60608301886127d5565b6128cc60808301876127d5565b6128d960a08301866127d5565b61286360c08301856127d5565b602081016109b782846124c7565b602081016109b782846124d0565b60a0808252810161291481888a6124e2565b905061292360208301876127d5565b61293060408301866127d5565b61293d60608301856127d5565b61294a60808301846124d9565b979650505050505050565b60a08082528101612966818861250e565b905061297560208301876127d5565b61298260408301866127d5565b61298f60608301856127d5565b61299c60808301846127d5565b9695505050505050565b602080825281016109b78161253c565b602080825281016109b781612575565b602080825281016109b7816125ae565b602080825281016109b78161260d565b602080825281016109b781612646565b602080825281016109b78161267f565b602080825281016109b7816126b8565b602080825281016114c481846126f1565b602080825281016114c48184612726565b602081016109b782846127d5565b60408101612a5482856127d5565b6114c4602083018461240f565b60408101612a6f82856127d5565b81810360208301526120c38184612427565b60408101612a8f82856127d5565b6114c460208301846127d5565b60405181810167ffffffffffffffff81118282101715612abb57600080fd5b604052919050565b600067ffffffffffffffff821115612ada57600080fd5b5060209081020190565b600067ffffffffffffffff821115612afb57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b60006109b782612b2f565b151590565b600160a060020a031690565b90565b600060068210612b4d57600080fd5b5090565b60006109b7825b60006109b782612b1f565b60006109b782612b3b565b82818337506000910152565b60005b83811015612b95578181015183820152602001612b7d565b8381111561066b5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a723058204b59e9a88e70d0c103eeb8a5411fcf73c9e1c6ffcd9d4bc8f9138e90a8e02e0a6c6578706572696d656e74616cf50037", "source": "// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector,\n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH; Martin Kuechler, martin.kuchler@slock.it; Heiko Burkhardt, heiko.burkhardt@slock.it\n\npragma solidity ^0.5.2;\npragma experimental ABIEncoderV2;\n\nimport \"../../contracts/Trading/MarketDB.sol\";\nimport \"../../contracts/Trading/AgreementLogic.sol\";\nimport \"ew-asset-registry-contracts/contracts/Interfaces/SonnenAssetProducingInterface.sol\";\nimport \"../../contracts/Interfaces/MarketLogicInterface.sol\";\n\n/// @title The logic contract for the AgreementDB of Origin list\ncontract MarketLogic is AgreementLogic, MarketLogicInterface {\n\n    event createdNewDemand(address _sender, uint indexed _demandId);\n    event createdNewSupply(address _sender, uint indexed _supplyId);\n\n    /// @notice constructor\n    constructor(\n        AssetContractLookupInterface _assetContractLookup,\n        MarketContractLookupInterface _marketContractLookup\n    )\n        AgreementLogic(_assetContractLookup,_marketContractLookup)\n        public\n    {\n    }\n\n\t/// @notice Function to create a demand\n\t/// @dev will return an event with the event-Id\n   function createDemand\n    (\n        string calldata _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power\n    )\n        external\n        onlyRole(RoleManagement.Role.Trader)\n     {\n        uint demandID = db.createDemand(_regionId, _dateTimeFrom, _dateTimeTo, _power, 0);\n        emit createdNewDemand(msg.sender, demandID);\n    }\n\n\t/// @notice Function to create a supply\n\t/// @dev will return an event with the event-Id\n    function createSupply\n    (\n        uint[] memory _assetId,\n        string memory _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power,\n        uint _baselinePower,\n        uint _price\n    )\n        public\n     {\n     //   require(AssetGeneralInterface(assetContractLookup.assetProducingRegistry()).getAssetOwner(_assetId) == msg.sender, \"wrong msg.sender\");\n        uint supplyID = db.createSupply(_assetId, _regionId, _dateTimeFrom, _dateTimeTo, _power, _baselinePower, 0, _price);\n\n        for(uint i=0; i < _assetId.length;i++){\n           SonnenAssetProducingInterface(assetContractLookup.assetProducingRegistry()).addSonnenAssetToSupply(_assetId[i], supplyID);\n        }\n        emit createdNewSupply(msg.sender, supplyID);\n\n\n    }\n\n\t/// @notice function to return the length of the allDemands-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllDemandListLength() external view returns (uint) {\n        return db.getAllDemandListLength();\n    }\n\n\t/// @notice function to return the length of the allSupply-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllSupplyListLength() external view returns (uint) {\n        return db.getAllSupplyListLength();\n    }\n\n\t/// @notice Returns the information of a demand\n\t/// @param _demandId index of the demand in the allDemands-array\n\t/// @return propertiesDocumentHash, documentDBURL and owner\n    function getDemand(uint _demandId)\n        external\n        view\n        returns (\n            string memory _regionId,\n            uint _dataTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _matchedPower\n        )\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n            _regionId = demand.regionId;\n            _dataTimeFrom = demand.dateTimeFrom;\n            _dateTimeTo = demand.dateTimeTo;\n            _power = demand.power;\n            _matchedPower = demand.matchedPower;\n    }\n\n    function getSupplyStruct(uint _supplyId) external view returns (MarketDB.Supply memory){\n        return db.getSupply(_supplyId);\n    }\n\n\n\t/// @notice gets a supply\n\t/// @param _supplyId the supply Id\n\t/// @return the supply\n    function getSupply(uint _supplyId)\n        public\n        view\n        returns (\n            uint[] memory _assetId,\n            string memory _regionId,\n            uint _dateTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _baselinePower,\n            uint _matchedPower,\n            uint _price\n        )\n    {\n        \n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n        _assetId = supply.assetId;\n        _regionId = supply.regionId;\n        _dateTimeFrom = supply.dateTimeFrom;\n        _dateTimeTo = supply.dateTimeTo; \n        _power = supply.power;\n        _baselinePower = supply.baselinePower;\n        _matchedPower = supply.matchedPower;\n        _price = supply.price;\n\n        \n    }\n\n    function setDemandMatchedPower(\n        uint _demandId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n\n        // Overflow check\n        assert(demand.matchedPower + _power >= demand.matchedPower);\n        require(demand.matchedPower + _power <= demand.power,\"too much power for demand\");\n\n        db.setDemandMatchedPower(_demandId, _power);\n    }\n\n    function setSupplyMatchedPower(\n        uint _supplyId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n\n        // Overflow check\n        assert(supply.matchedPower + _power >= supply.matchedPower);\n\n        uint agreementId = getAgreementForSupplyPublic(_supplyId);\n        \n        uint demandId= db.getAgreementDB(agreementId).demandId;\n        MarketDB.Demand memory demand = db.getDemand(demandId);\n    \n        uint powerStillOpen = demand.power - demand.matchedPower; \n\n        if(powerStillOpen >= _power) {\n            db.setSupplyMatchedPower(_supplyId, supply.matchedPower +_power);\n        } else {\n            uint diff = _power - powerStillOpen;\n            uint matchedPower = _power - diff;\n            db.setSupplyMatchedPower(_supplyId,supply.matchedPower + matchedPower);\n        }\n    }\n\n    function getDemandForAgreement(uint _agreementId) external view returns (uint _demandId){\n         MarketDB.Agreement memory a = db.getAgreementDB(_agreementId);\n\n         return a.demandId;\n    }\n\n\n}\n", "networks": "{}" }
