{ "abi": [{ "constant": false, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "abortSupply", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "createDemand", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_demandId", "type": "uint256" }], "name": "getDemand", "outputs": [{ "name": "_regionId", "type": "string" }, { "name": "_dataTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_matchedPower", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_newLogic", "type": "address" }], "name": "update", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getSupplyStruct", "outputs": [{ "components": [{ "name": "assetId", "type": "uint256[]" }, { "name": "regionId", "type": "string" }, { "name": "dateTimeFrom", "type": "uint256" }, { "name": "dateTimeTo", "type": "uint256" }, { "name": "power", "type": "uint256" }, { "name": "matchedPower", "type": "uint256" }, { "name": "price", "type": "uint256" }], "name": "", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllAgreementListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getDemandForAgreement", "outputs": [{ "name": "_demandId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "userContractLookup", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_supplyId", "type": "uint256" }], "name": "createAgreement", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "db", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getAgreement", "outputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_supplyIds", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_demandId", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "setDemandMatchedPower", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getDemandForAgreementPublic", "outputs": [{ "name": "_demandId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllSupplyListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "assetContractLookup", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getAgreementForSupplyPublic", "outputs": [{ "name": "_agreementId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_newOwner", "type": "address" }], "name": "changeOwner", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getAgreementForSupply", "outputs": [{ "name": "_agreementId", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_role", "type": "uint8" }, { "name": "_caller", "type": "address" }], "name": "isRole", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "_agreementId", "type": "uint256" }], "name": "getAgreementStruct", "outputs": [{ "components": [{ "name": "demandId", "type": "uint256" }, { "name": "supplyId", "type": "uint256[]" }], "name": "", "type": "tuple" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "_supplyId", "type": "uint256" }, { "name": "_power", "type": "uint256" }], "name": "setSupplyMatchedPower", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_database", "type": "address" }, { "name": "_admin", "type": "address" }], "name": "init", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "_assetId", "type": "uint256" }, { "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_price", "type": "uint256" }], "name": "createSupply", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "_supplyId", "type": "uint256" }], "name": "getSupply", "outputs": [{ "name": "_assetId", "type": "uint256" }, { "name": "_regionId", "type": "string" }, { "name": "_dateTimeFrom", "type": "uint256" }, { "name": "_dateTimeTo", "type": "uint256" }, { "name": "_power", "type": "uint256" }, { "name": "_matchedPower", "type": "uint256" }, { "name": "_price", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllDemandListLength", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "_assetContractLookup", "type": "address" }, { "name": "_marketContractLookup", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_sender", "type": "address" }, { "indexed": true, "name": "_demandId", "type": "uint256" }], "name": "createdNewDemand", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_sender", "type": "address" }, { "indexed": true, "name": "_supplyId", "type": "uint256" }], "name": "createdNewSupply", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "_agreementId", "type": "uint256" }, { "indexed": true, "name": "_demandId", "type": "uint256" }, { "indexed": true, "name": "_supplyId", "type": "uint256" }], "name": "LogAgreementFullySigned", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "_agreementId", "type": "uint256" }, { "indexed": true, "name": "_demandId", "type": "uint256" }], "name": "LogAgreementCreated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "_newOwner", "type": "address" }], "name": "LogChangeOwner", "type": "event" }], "bytecode": "60806040523480156200001157600080fd5b5060405160408062002d4183398101806040526200003391908101906200015b565b818181600160a060020a0316635c7460d66040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156200008b57600080fd5b505afa158015620000a0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620000c6919081019062000132565b60008054600160a060020a03938416600160a060020a03199182161790915560018054928416928216929092179091556003805493909216921691909117905550620001c69050565b60006200011d82516200019a565b9392505050565b60006200011d8251620001ad565b6000602082840312156200014557600080fd5b60006200015384846200010f565b949350505050565b600080604083850312156200016f57600080fd5b60006200017d858562000124565b9250506020620001908582860162000124565b9150509250929050565b6000620001a782620001ba565b92915050565b6000620001a7826200019a565b600160a060020a031690565b612b6b80620001d66000396000f3fe608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063639decca116100f2578063bb5a389e1161009b578063f09a401611610075578063f09a40161461037c578063f735f3fe1461038f578063f77ee79d146103a2578063f9e170db146103c8576101b2565b8063bb5a389e14610329578063da119ed114610349578063e182fb7414610369576101b2565b80639a525f0d116100cc5780639a525f0d146102f0578063a6f9dae114610303578063b3dfe5d514610316576101b2565b8063639decca146102cb5780636c608004146102d35780638da5cb5b146102db576101b2565b8063412a68d61161015f5780634d655aff116101395780634d655aff1461028f5780634f9f6fe6146102975780635266ddaa146102b8578063610b350f14610254576101b2565b8063412a68d61461025457806344724c8c1461026757806344ce97c91461027c576101b2565b80631c1b8772116101905780631c1b87721461020c5780631df954bd1461021f57806323dc20731461023f576101b2565b806307800d3f146101b757806317fe7eb5146101cc5780631ac2733c146101df575b600080fd5b6101ca6101c5366004612287565b6103d0565b005b6101ca6101da36600461214d565b610670565b6101f26101ed366004612287565b61078b565b604051610203959493929190612860565b60405180910390f35b6101ca61021a3660046120b0565b610861565b61023261022d366004612287565b610911565b6040516102039190612932565b6102476109bc565b6040516102039190612943565b610247610262366004612287565b610a57565b61026f610b06565b60405161020391906127ff565b6101ca61028a366004612362565b610b15565b61026f610dd0565b6102aa6102a5366004612287565b610ddf565b6040516102039291906129e2565b6101ca6102c6366004612362565b610eb3565b61024761101f565b61026f61107d565b6102e361108c565b6040516102039190612761565b6102476102fe366004612287565b61109b565b6101ca6103113660046120b0565b611171565b610247610324366004612287565b611236565b61033c61033736600461212e565b611315565b60405161020391906127f1565b61035c610357366004612287565b611440565b6040516102039190612921565b6101ca610377366004612362565b6114e5565b6101ca61038a3660046120f4565b611827565b6101ca61039d3660046122c3565b6118ba565b6103b56103b0366004612287565b611afd565b604051610203979695949392919061298c565b610247611c00565b6103d8611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590610421908590600401612943565b604080518083038186803b15801561043857600080fd5b505afa15801561044c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104709190810190612234565b6020810151909150156104a657604051600080516020612b12833981519152815260040161049d906128c1565b60405180910390fd5b6104ae611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f7908690600401612943565b60006040518083038186803b15801561050f57600080fd5b505afa158015610523573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054b9190810190612252565b905060005b81515181101561066a57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ab57600080fd5b505afa1580156105bf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e391908101906120d6565b600160a060020a031663d657c9b283600001518381518110151561060357fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062c9190612943565b600060405180830381600087803b15801561064657600080fd5b505af115801561065a573d6000803e3d6000fd5b5050600190920191506105509050565b50505050565b600461067c8133611315565b15156106a257604051600080516020612b12833981519152815260040161049d906128d1565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a906106f6908a908a908a908a908a90899060040161280d565b602060405180830381600087803b15801561071057600080fd5b505af1158015610724573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061074891908101906122a5565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c3957253360405161077a919061276f565b60405180910390a250505050505050565b606060008060008061079b611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906107e4908a90600401612943565b60006040518083038186803b1580156107fc57600080fd5b505afa158015610810573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261083891908101906121ff565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a0316331461089357604051600080516020612b12833981519152815260040161049d906128e1565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae1906108dc908490600401612761565b600060405180830381600087803b1580156108f657600080fd5b505af115801561090a573d6000803e3d6000fd5b5050505050565b610919611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610962908590600401612943565b60006040518083038186803b15801561097a57600080fd5b505afa15801561098e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b69190810190612252565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610a1a57600080fd5b505afa158015610a2e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610a5291908101906122a5565b905090565b6000610a61611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610aaa908690600401612943565b60006040518083038186803b158015610ac257600080fd5b505afa158015610ad6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610afe91908101906121ca565b519392505050565b600154600160a060020a031681565b6040805160018082528183019092526060916020808301908038833901905050905081816000815181101515610b4757fe5b602090810290910101526002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610b9d908790869060040161296c565b602060405180830381600087803b158015610bb757600080fd5b505af1158015610bcb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bef91908101906122a5565b905060005b825181101561090a57610c05611c75565b6002548451600160a060020a039091169063f77ee79d90869085908110610c2857fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610c519190612943565b60006040518083038186803b158015610c6957600080fd5b505afa158015610c7d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610ca59190810190612252565b905060005b815151811015610dc657600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610d0557600080fd5b505afa158015610d19573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d3d91908101906120d6565b600160a060020a03166380c5ccc7836000015183815181101515610d5d57fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610d88929190612951565b600060405180830381600087803b158015610da257600080fd5b505af1158015610db6573d6000803e3d6000fd5b505060019092019150610caa9050565b5050600101610bf4565b600254600160a060020a031681565b600080610dea611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610e33908790600401612943565b60006040518083038186803b158015610e4b57600080fd5b505afa158015610e5f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610e8791908101906121ca565b8051602082015180519195509192506000908110610ea157fe5b90602001906020020151915050915091565b610ebb611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90610f04908690600401612943565b60006040518083038186803b158015610f1c57600080fd5b505afa158015610f30573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f5891908101906121ff565b60808101519091508281011015610f6b57fe5b6060810151608082015183011115610f9d57604051600080516020612b12833981519152815260040161049d90612901565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa90610fe890869086906004016129e2565b600060405180830381600087803b15801561100257600080fd5b505af1158015611016573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610a1a57600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b60006110a5611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906110ee908690600401612943565b604080518083038186803b15801561110557600080fd5b505afa158015611119573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061113d9190810190612234565b90508060200151151561116a57604051600080516020612b12833981519152815260040161049d906128f1565b5192915050565b600054600160a060020a031633146111a357604051600080516020612b12833981519152815260040161049d906128e1565b600160a060020a03811615156111d357604051600080516020612b12833981519152815260040161049d906128b1565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af169061122b908390612761565b60405180910390a150565b6000611240611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590611289908690600401612943565b604080518083038186803b1580156112a057600080fd5b505afa1580156112b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506112d89190810190612234565b90508060200151151561130557604051600080516020612b12833981519152815260040161049d906128f1565b61130e8361109b565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561136957600080fd5b505afa15801561137d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506113a191908101906120d6565b600160a060020a031663265209f2846040518263ffffffff1660e060020a0281526004016113cf9190612761565b60206040518083038186803b1580156113e757600080fd5b505afa1580156113fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061141f91908101906122a5565b9050600084600581111561142f57fe5b60020a919091161515949350505050565b611448611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611491908590600401612943565b60006040518083038186803b1580156114a957600080fd5b505afa1580156114bd573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b691908101906121ca565b6114ed611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611536908690600401612943565b60006040518083038186803b15801561154e57600080fd5b505afa158015611562573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261158a9190810190612252565b60a0810151909150828101101561159d57fe5b60006115a88461109b565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec4656906115f7908590600401612943565b60006040518083038186803b15801561160f57600080fd5b505afa158015611623573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261164b91908101906121ca565b519050611656611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c9061169f908590600401612943565b60006040518083038186803b1580156116b757600080fd5b505afa1580156116cb573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526116f391908101906121ff565b6080810151606082015191925090038581106117915760025460a08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb749161175a918b918b01906004016129e2565b600060405180830381600087803b15801561177457600080fd5b505af1158015611788573d6000803e3d6000fd5b50505050611016565b60025460a08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb74916117ea918d918601906004016129e2565b600060405180830381600087803b15801561180457600080fd5b505af1158015611818573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a0316331461185957604051600080516020612b12833981519152815260040161049d906128e1565b600254600160a060020a03161561188a57604051600080516020612b12833981519152815260040161049d90612911565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60408051600180825281830190925260609160208083019080388339019050509050868160008151811015156118ec57fe5b602090810290910101526002546040517f4988a23d000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690634988a23d9061194c9085908b908b908b908b9089908c9060040161277d565b602060405180830381600087803b15801561196657600080fd5b505af115801561197a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061199e91908101906122a5565b905060005b8251811015611aba57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156119fd57600080fd5b505afa158015611a11573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250611a3591908101906120d6565b600160a060020a03166358c0dd608483815181101515611a5157fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401611a7c9291906129e2565b600060405180830381600087803b158015611a9657600080fd5b505af1158015611aaa573d6000803e3d6000fd5b5050600190920191506119a39050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd33604051611aeb919061276f565b60405180910390a25050505050505050565b600060606000806000806000611b11611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611b5a908c90600401612943565b60006040518083038186803b158015611b7257600080fd5b505afa158015611b86573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611bae9190810190612252565b80518051919250906000908110611bc157fe5b60209081029091018101519082015160408301516060840151608085015160a086015160c090960151949e939d50919b50995097509195509350915050565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610a1a57600080fd5b604080518082019091526000808252602082015290565b60e060405190810160405280606081526020016060815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b600061130e8235612a80565b600061130e8251612a80565b6000601f82018313611d2457600080fd5b8151611d37611d3282612a24565b6129fd565b91508181835260208401935060208101905083856020840282011115611d5c57600080fd5b60005b83811015611d885781611d7288826120a4565b8452506020928301929190910190600101611d5f565b5050505092915050565b600061130e8251612a8b565b600061130e8235612a9f565b600080601f83018413611dbc57600080fd5b50813567ffffffffffffffff811115611dd457600080fd5b602083019150836001820283011115611dec57600080fd5b9250929050565b6000601f82018313611e0457600080fd5b8151611e12611d3282612a45565b91508082526020830160208301858383011115611e2e57600080fd5b611e39838284612adb565b50505092915050565b6000601f82018313611e5357600080fd5b8135611e61611d3282612a45565b91508082526020830160208301858383011115611e7d57600080fd5b611e39838284612acf565b600060408284031215611e9a57600080fd5b611ea460406129fd565b90506000611eb284846120a4565b825250602082015167ffffffffffffffff811115611ecf57600080fd5b611edb84828501611d13565b60208301525092915050565b600060a08284031215611ef957600080fd5b611f0360a06129fd565b825190915067ffffffffffffffff811115611f1d57600080fd5b611f2984828501611df3565b8252506020611f3a848483016120a4565b6020830152506040611f4e848285016120a4565b6040830152506060611f62848285016120a4565b6060830152506080611f76848285016120a4565b60808301525092915050565b600060408284031215611f9457600080fd5b611f9e60406129fd565b90506000611fac84846120a4565b8252506020611edb84848301611d92565b600060e08284031215611fcf57600080fd5b611fd960e06129fd565b825190915067ffffffffffffffff811115611ff357600080fd5b611fff84828501611d13565b825250602082015167ffffffffffffffff81111561201c57600080fd5b61202884828501611df3565b602083015250604061203c848285016120a4565b6040830152506060612050848285016120a4565b6060830152506080612064848285016120a4565b60808301525060a0612078848285016120a4565b60a08301525060c061208c848285016120a4565b60c08301525092915050565b600061130e8235612a9c565b600061130e8251612a9c565b6000602082840312156120c257600080fd5b60006120ce8484611cfb565b949350505050565b6000602082840312156120e857600080fd5b60006120ce8484611d07565b6000806040838503121561210757600080fd5b60006121138585611cfb565b925050602061212485828601611cfb565b9150509250929050565b6000806040838503121561214157600080fd5b60006121138585611d9e565b60008060008060006080868803121561216557600080fd5b853567ffffffffffffffff81111561217c57600080fd5b61218888828901611daa565b9550955050602061219b88828901612098565b93505060406121ac88828901612098565b92505060606121bd88828901612098565b9150509295509295909350565b6000602082840312156121dc57600080fd5b815167ffffffffffffffff8111156121f357600080fd5b6120ce84828501611e88565b60006020828403121561221157600080fd5b815167ffffffffffffffff81111561222857600080fd5b6120ce84828501611ee7565b60006040828403121561224657600080fd5b60006120ce8484611f82565b60006020828403121561226457600080fd5b815167ffffffffffffffff81111561227b57600080fd5b6120ce84828501611fbd565b60006020828403121561229957600080fd5b60006120ce8484612098565b6000602082840312156122b757600080fd5b60006120ce84846120a4565b60008060008060008060c087890312156122dc57600080fd5b60006122e88989612098565b965050602087013567ffffffffffffffff81111561230557600080fd5b61231189828a01611e42565b955050604061232289828a01612098565b945050606061233389828a01612098565b935050608061234489828a01612098565b92505060a061235589828a01612098565b9150509295509295509295565b6000806040838503121561237557600080fd5b60006123818585612098565b925050602061212485828601612098565b600061239e8383612758565b505060200190565b6123af81612ab2565b82525050565b6123af81612a80565b60006123c982612a73565b6123d38185612a77565b93506123de83612a6d565b60005b82811015612409576123f4868351612392565b95506123ff82612a6d565b91506001016123e1565b5093949350505050565b600061241e82612a73565b6124288185612a77565b935061243383612a6d565b60005b8281101561240957612449868351612392565b955061245482612a6d565b9150600101612436565b6123af81612a8b565b6123af81612ab9565b6123af81612ac4565b60006124858385612a77565b9350612492838584612acf565b61249b83612b07565b9093019392505050565b60006124b082612a73565b6124ba8185612a77565b93506124ca818560208601612adb565b61249b81612b07565b60006124e0601883612a77565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b6000612519601d83612a77565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b6000612552602483612a77565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006125b1601783612a77565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b60006125ea601283612a77565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b6000612623601983612a77565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b600061265c601883612a77565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b8051600090604084019061269c8582612758565b50602083015184820360208601526126b48282612413565b95945050505050565b805160e0808452600091908401906126d58282612413565b915050602083015184820360208601526126ef82826124a5565b91505060408301516127046040860182612758565b5060608301516127176060860182612758565b50608083015161272a6080860182612758565b5060a083015161273d60a0860182612758565b5060c083015161275060c0860182612758565b509392505050565b6123af81612a9c565b602081016109b682846123b5565b602081016109b682846123a6565b60e0808252810161278e818a6123be565b905081810360208301526127a281896124a5565b90506127b16040830188612758565b6127be6060830187612758565b6127cb6080830186612758565b6127d860a0830185612470565b6127e560c0830184612758565b98975050505050505050565b602081016109b6828461245e565b602081016109b68284612467565b60a0808252810161281f81888a612479565b905061282e6020830187612758565b61283b6040830186612758565b6128486060830185612758565b6128556080830184612470565b979650505050505050565b60a0808252810161287181886124a5565b90506128806020830187612758565b61288d6040830186612758565b61289a6060830185612758565b6128a76080830184612758565b9695505050505050565b602080825281016109b6816124d3565b602080825281016109b68161250c565b602080825281016109b681612545565b602080825281016109b6816125a4565b602080825281016109b6816125dd565b602080825281016109b681612616565b602080825281016109b68161264f565b6020808252810161130e8184612688565b6020808252810161130e81846126bd565b602081016109b68284612758565b6040810161295f8285612758565b61130e60208301846123a6565b6040810161297a8285612758565b81810360208301526120ce81846123be565b60e0810161299a828a612758565b81810360208301526129ac81896124a5565b90506129bb6040830188612758565b6129c86060830187612758565b6129d56080830186612758565b6127d860a0830185612758565b604081016129f08285612758565b61130e6020830184612758565b60405181810167ffffffffffffffff81118282101715612a1c57600080fd5b604052919050565b600067ffffffffffffffff821115612a3b57600080fd5b5060209081020190565b600067ffffffffffffffff821115612a5c57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b60006109b682612a90565b151590565b600160a060020a031690565b90565b600060068210612aae57600080fd5b5090565b60006109b6825b60006109b682612a80565b60006109b682612a9c565b82818337506000910152565b60005b83811015612af6578181015183820152602001612ade565b8381111561066a5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a72305820b37122fa4e08c09c83103edd910d4db08fafcd3fe823b2d45f01f669a24e3c8a6c6578706572696d656e74616cf50037", "contractName": "MarketLogic", "deployedBytecode": "608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063639decca116100f2578063bb5a389e1161009b578063f09a401611610075578063f09a40161461037c578063f735f3fe1461038f578063f77ee79d146103a2578063f9e170db146103c8576101b2565b8063bb5a389e14610329578063da119ed114610349578063e182fb7414610369576101b2565b80639a525f0d116100cc5780639a525f0d146102f0578063a6f9dae114610303578063b3dfe5d514610316576101b2565b8063639decca146102cb5780636c608004146102d35780638da5cb5b146102db576101b2565b8063412a68d61161015f5780634d655aff116101395780634d655aff1461028f5780634f9f6fe6146102975780635266ddaa146102b8578063610b350f14610254576101b2565b8063412a68d61461025457806344724c8c1461026757806344ce97c91461027c576101b2565b80631c1b8772116101905780631c1b87721461020c5780631df954bd1461021f57806323dc20731461023f576101b2565b806307800d3f146101b757806317fe7eb5146101cc5780631ac2733c146101df575b600080fd5b6101ca6101c5366004612287565b6103d0565b005b6101ca6101da36600461214d565b610670565b6101f26101ed366004612287565b61078b565b604051610203959493929190612860565b60405180910390f35b6101ca61021a3660046120b0565b610861565b61023261022d366004612287565b610911565b6040516102039190612932565b6102476109bc565b6040516102039190612943565b610247610262366004612287565b610a57565b61026f610b06565b60405161020391906127ff565b6101ca61028a366004612362565b610b15565b61026f610dd0565b6102aa6102a5366004612287565b610ddf565b6040516102039291906129e2565b6101ca6102c6366004612362565b610eb3565b61024761101f565b61026f61107d565b6102e361108c565b6040516102039190612761565b6102476102fe366004612287565b61109b565b6101ca6103113660046120b0565b611171565b610247610324366004612287565b611236565b61033c61033736600461212e565b611315565b60405161020391906127f1565b61035c610357366004612287565b611440565b6040516102039190612921565b6101ca610377366004612362565b6114e5565b6101ca61038a3660046120f4565b611827565b6101ca61039d3660046122c3565b6118ba565b6103b56103b0366004612287565b611afd565b604051610203979695949392919061298c565b610247611c00565b6103d8611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590610421908590600401612943565b604080518083038186803b15801561043857600080fd5b505afa15801561044c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104709190810190612234565b6020810151909150156104a657604051600080516020612b12833981519152815260040161049d906128c1565b60405180910390fd5b6104ae611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f7908690600401612943565b60006040518083038186803b15801561050f57600080fd5b505afa158015610523573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054b9190810190612252565b905060005b81515181101561066a57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ab57600080fd5b505afa1580156105bf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e391908101906120d6565b600160a060020a031663d657c9b283600001518381518110151561060357fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062c9190612943565b600060405180830381600087803b15801561064657600080fd5b505af115801561065a573d6000803e3d6000fd5b5050600190920191506105509050565b50505050565b600461067c8133611315565b15156106a257604051600080516020612b12833981519152815260040161049d906128d1565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a906106f6908a908a908a908a908a90899060040161280d565b602060405180830381600087803b15801561071057600080fd5b505af1158015610724573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061074891908101906122a5565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c3957253360405161077a919061276f565b60405180910390a250505050505050565b606060008060008061079b611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906107e4908a90600401612943565b60006040518083038186803b1580156107fc57600080fd5b505afa158015610810573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261083891908101906121ff565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a0316331461089357604051600080516020612b12833981519152815260040161049d906128e1565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae1906108dc908490600401612761565b600060405180830381600087803b1580156108f657600080fd5b505af115801561090a573d6000803e3d6000fd5b5050505050565b610919611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610962908590600401612943565b60006040518083038186803b15801561097a57600080fd5b505afa15801561098e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b69190810190612252565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610a1a57600080fd5b505afa158015610a2e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610a5291908101906122a5565b905090565b6000610a61611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610aaa908690600401612943565b60006040518083038186803b158015610ac257600080fd5b505afa158015610ad6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610afe91908101906121ca565b519392505050565b600154600160a060020a031681565b6040805160018082528183019092526060916020808301908038833901905050905081816000815181101515610b4757fe5b602090810290910101526002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610b9d908790869060040161296c565b602060405180830381600087803b158015610bb757600080fd5b505af1158015610bcb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bef91908101906122a5565b905060005b825181101561090a57610c05611c75565b6002548451600160a060020a039091169063f77ee79d90869085908110610c2857fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610c519190612943565b60006040518083038186803b158015610c6957600080fd5b505afa158015610c7d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610ca59190810190612252565b905060005b815151811015610dc657600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610d0557600080fd5b505afa158015610d19573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d3d91908101906120d6565b600160a060020a03166380c5ccc7836000015183815181101515610d5d57fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610d88929190612951565b600060405180830381600087803b158015610da257600080fd5b505af1158015610db6573d6000803e3d6000fd5b505060019092019150610caa9050565b5050600101610bf4565b600254600160a060020a031681565b600080610dea611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610e33908790600401612943565b60006040518083038186803b158015610e4b57600080fd5b505afa158015610e5f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610e8791908101906121ca565b8051602082015180519195509192506000908110610ea157fe5b90602001906020020151915050915091565b610ebb611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90610f04908690600401612943565b60006040518083038186803b158015610f1c57600080fd5b505afa158015610f30573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f5891908101906121ff565b60808101519091508281011015610f6b57fe5b6060810151608082015183011115610f9d57604051600080516020612b12833981519152815260040161049d90612901565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa90610fe890869086906004016129e2565b600060405180830381600087803b15801561100257600080fd5b505af1158015611016573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610a1a57600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b60006110a5611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906110ee908690600401612943565b604080518083038186803b15801561110557600080fd5b505afa158015611119573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061113d9190810190612234565b90508060200151151561116a57604051600080516020612b12833981519152815260040161049d906128f1565b5192915050565b600054600160a060020a031633146111a357604051600080516020612b12833981519152815260040161049d906128e1565b600160a060020a03811615156111d357604051600080516020612b12833981519152815260040161049d906128b1565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af169061122b908390612761565b60405180910390a150565b6000611240611c5e565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d590611289908690600401612943565b604080518083038186803b1580156112a057600080fd5b505afa1580156112b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506112d89190810190612234565b90508060200151151561130557604051600080516020612b12833981519152815260040161049d906128f1565b61130e8361109b565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b15801561136957600080fd5b505afa15801561137d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506113a191908101906120d6565b600160a060020a031663265209f2846040518263ffffffff1660e060020a0281526004016113cf9190612761565b60206040518083038186803b1580156113e757600080fd5b505afa1580156113fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061141f91908101906122a5565b9050600084600581111561142f57fe5b60020a919091161515949350505050565b611448611ce3565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690611491908590600401612943565b60006040518083038186803b1580156114a957600080fd5b505afa1580156114bd573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109b691908101906121ca565b6114ed611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611536908690600401612943565b60006040518083038186803b15801561154e57600080fd5b505afa158015611562573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261158a9190810190612252565b60a0810151909150828101101561159d57fe5b60006115a88461109b565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec4656906115f7908590600401612943565b60006040518083038186803b15801561160f57600080fd5b505afa158015611623573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261164b91908101906121ca565b519050611656611cb3565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c9061169f908590600401612943565b60006040518083038186803b1580156116b757600080fd5b505afa1580156116cb573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526116f391908101906121ff565b6080810151606082015191925090038581106117915760025460a08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb749161175a918b918b01906004016129e2565b600060405180830381600087803b15801561177457600080fd5b505af1158015611788573d6000803e3d6000fd5b50505050611016565b60025460a08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb74916117ea918d918601906004016129e2565b600060405180830381600087803b15801561180457600080fd5b505af1158015611818573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a0316331461185957604051600080516020612b12833981519152815260040161049d906128e1565b600254600160a060020a03161561188a57604051600080516020612b12833981519152815260040161049d90612911565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60408051600180825281830190925260609160208083019080388339019050509050868160008151811015156118ec57fe5b602090810290910101526002546040517f4988a23d000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690634988a23d9061194c9085908b908b908b908b9089908c9060040161277d565b602060405180830381600087803b15801561196657600080fd5b505af115801561197a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061199e91908101906122a5565b905060005b8251811015611aba57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156119fd57600080fd5b505afa158015611a11573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250611a3591908101906120d6565b600160a060020a03166358c0dd608483815181101515611a5157fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401611a7c9291906129e2565b600060405180830381600087803b158015611a9657600080fd5b505af1158015611aaa573d6000803e3d6000fd5b5050600190920191506119a39050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd33604051611aeb919061276f565b60405180910390a25050505050505050565b600060606000806000806000611b11611c75565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611b5a908c90600401612943565b60006040518083038186803b158015611b7257600080fd5b505afa158015611b86573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611bae9190810190612252565b80518051919250906000908110611bc157fe5b60209081029091018101519082015160408301516060840151608085015160a086015160c090960151949e939d50919b50995097509195509350915050565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610a1a57600080fd5b604080518082019091526000808252602082015290565b60e060405190810160405280606081526020016060815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b600061130e8235612a80565b600061130e8251612a80565b6000601f82018313611d2457600080fd5b8151611d37611d3282612a24565b6129fd565b91508181835260208401935060208101905083856020840282011115611d5c57600080fd5b60005b83811015611d885781611d7288826120a4565b8452506020928301929190910190600101611d5f565b5050505092915050565b600061130e8251612a8b565b600061130e8235612a9f565b600080601f83018413611dbc57600080fd5b50813567ffffffffffffffff811115611dd457600080fd5b602083019150836001820283011115611dec57600080fd5b9250929050565b6000601f82018313611e0457600080fd5b8151611e12611d3282612a45565b91508082526020830160208301858383011115611e2e57600080fd5b611e39838284612adb565b50505092915050565b6000601f82018313611e5357600080fd5b8135611e61611d3282612a45565b91508082526020830160208301858383011115611e7d57600080fd5b611e39838284612acf565b600060408284031215611e9a57600080fd5b611ea460406129fd565b90506000611eb284846120a4565b825250602082015167ffffffffffffffff811115611ecf57600080fd5b611edb84828501611d13565b60208301525092915050565b600060a08284031215611ef957600080fd5b611f0360a06129fd565b825190915067ffffffffffffffff811115611f1d57600080fd5b611f2984828501611df3565b8252506020611f3a848483016120a4565b6020830152506040611f4e848285016120a4565b6040830152506060611f62848285016120a4565b6060830152506080611f76848285016120a4565b60808301525092915050565b600060408284031215611f9457600080fd5b611f9e60406129fd565b90506000611fac84846120a4565b8252506020611edb84848301611d92565b600060e08284031215611fcf57600080fd5b611fd960e06129fd565b825190915067ffffffffffffffff811115611ff357600080fd5b611fff84828501611d13565b825250602082015167ffffffffffffffff81111561201c57600080fd5b61202884828501611df3565b602083015250604061203c848285016120a4565b6040830152506060612050848285016120a4565b6060830152506080612064848285016120a4565b60808301525060a0612078848285016120a4565b60a08301525060c061208c848285016120a4565b60c08301525092915050565b600061130e8235612a9c565b600061130e8251612a9c565b6000602082840312156120c257600080fd5b60006120ce8484611cfb565b949350505050565b6000602082840312156120e857600080fd5b60006120ce8484611d07565b6000806040838503121561210757600080fd5b60006121138585611cfb565b925050602061212485828601611cfb565b9150509250929050565b6000806040838503121561214157600080fd5b60006121138585611d9e565b60008060008060006080868803121561216557600080fd5b853567ffffffffffffffff81111561217c57600080fd5b61218888828901611daa565b9550955050602061219b88828901612098565b93505060406121ac88828901612098565b92505060606121bd88828901612098565b9150509295509295909350565b6000602082840312156121dc57600080fd5b815167ffffffffffffffff8111156121f357600080fd5b6120ce84828501611e88565b60006020828403121561221157600080fd5b815167ffffffffffffffff81111561222857600080fd5b6120ce84828501611ee7565b60006040828403121561224657600080fd5b60006120ce8484611f82565b60006020828403121561226457600080fd5b815167ffffffffffffffff81111561227b57600080fd5b6120ce84828501611fbd565b60006020828403121561229957600080fd5b60006120ce8484612098565b6000602082840312156122b757600080fd5b60006120ce84846120a4565b60008060008060008060c087890312156122dc57600080fd5b60006122e88989612098565b965050602087013567ffffffffffffffff81111561230557600080fd5b61231189828a01611e42565b955050604061232289828a01612098565b945050606061233389828a01612098565b935050608061234489828a01612098565b92505060a061235589828a01612098565b9150509295509295509295565b6000806040838503121561237557600080fd5b60006123818585612098565b925050602061212485828601612098565b600061239e8383612758565b505060200190565b6123af81612ab2565b82525050565b6123af81612a80565b60006123c982612a73565b6123d38185612a77565b93506123de83612a6d565b60005b82811015612409576123f4868351612392565b95506123ff82612a6d565b91506001016123e1565b5093949350505050565b600061241e82612a73565b6124288185612a77565b935061243383612a6d565b60005b8281101561240957612449868351612392565b955061245482612a6d565b9150600101612436565b6123af81612a8b565b6123af81612ab9565b6123af81612ac4565b60006124858385612a77565b9350612492838584612acf565b61249b83612b07565b9093019392505050565b60006124b082612a73565b6124ba8185612a77565b93506124ca818560208601612adb565b61249b81612b07565b60006124e0601883612a77565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b6000612519601d83612a77565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b6000612552602483612a77565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006125b1601783612a77565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b60006125ea601283612a77565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b6000612623601983612a77565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b600061265c601883612a77565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b8051600090604084019061269c8582612758565b50602083015184820360208601526126b48282612413565b95945050505050565b805160e0808452600091908401906126d58282612413565b915050602083015184820360208601526126ef82826124a5565b91505060408301516127046040860182612758565b5060608301516127176060860182612758565b50608083015161272a6080860182612758565b5060a083015161273d60a0860182612758565b5060c083015161275060c0860182612758565b509392505050565b6123af81612a9c565b602081016109b682846123b5565b602081016109b682846123a6565b60e0808252810161278e818a6123be565b905081810360208301526127a281896124a5565b90506127b16040830188612758565b6127be6060830187612758565b6127cb6080830186612758565b6127d860a0830185612470565b6127e560c0830184612758565b98975050505050505050565b602081016109b6828461245e565b602081016109b68284612467565b60a0808252810161281f81888a612479565b905061282e6020830187612758565b61283b6040830186612758565b6128486060830185612758565b6128556080830184612470565b979650505050505050565b60a0808252810161287181886124a5565b90506128806020830187612758565b61288d6040830186612758565b61289a6060830185612758565b6128a76080830184612758565b9695505050505050565b602080825281016109b6816124d3565b602080825281016109b68161250c565b602080825281016109b681612545565b602080825281016109b6816125a4565b602080825281016109b6816125dd565b602080825281016109b681612616565b602080825281016109b68161264f565b6020808252810161130e8184612688565b6020808252810161130e81846126bd565b602081016109b68284612758565b6040810161295f8285612758565b61130e60208301846123a6565b6040810161297a8285612758565b81810360208301526120ce81846123be565b60e0810161299a828a612758565b81810360208301526129ac81896124a5565b90506129bb6040830188612758565b6129c86060830187612758565b6129d56080830186612758565b6127d860a0830185612758565b604081016129f08285612758565b61130e6020830184612758565b60405181810167ffffffffffffffff81118282101715612a1c57600080fd5b604052919050565b600067ffffffffffffffff821115612a3b57600080fd5b5060209081020190565b600067ffffffffffffffff821115612a5c57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b60006109b682612a90565b151590565b600160a060020a031690565b90565b600060068210612aae57600080fd5b5090565b60006109b6825b60006109b682612a80565b60006109b682612a9c565b82818337506000910152565b60005b83811015612af6578181015183820152602001612ade565b8381111561066a5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a72305820b37122fa4e08c09c83103edd910d4db08fafcd3fe823b2d45f01f669a24e3c8a6c6578706572696d656e74616cf50037", "source": "// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector,\n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH; Martin Kuechler, martin.kuchler@slock.it; Heiko Burkhardt, heiko.burkhardt@slock.it\n\npragma solidity ^0.5.2;\npragma experimental ABIEncoderV2;\n\nimport \"../../contracts/Trading/MarketDB.sol\";\nimport \"../../contracts/Trading/AgreementLogic.sol\";\nimport \"ew-asset-registry-contracts/contracts/Interfaces/SonnenAssetProducingInterface.sol\";\nimport \"../../contracts/Interfaces/MarketLogicInterface.sol\";\n\n/// @title The logic contract for the AgreementDB of Origin list\ncontract MarketLogic is AgreementLogic, MarketLogicInterface {\n\n    event createdNewDemand(address _sender, uint indexed _demandId);\n    event createdNewSupply(address _sender, uint indexed _supplyId);\n\n    /// @notice constructor\n    constructor(\n        AssetContractLookupInterface _assetContractLookup,\n        MarketContractLookupInterface _marketContractLookup\n    )\n        AgreementLogic(_assetContractLookup,_marketContractLookup)\n        public\n    {\n    }\n\n\t/// @notice Function to create a demand\n\t/// @dev will return an event with the event-Id\n   function createDemand\n    (\n        string calldata _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power\n    )\n        external\n        onlyRole(RoleManagement.Role.Trader)\n     {\n        uint demandID = db.createDemand(_regionId, _dateTimeFrom, _dateTimeTo, _power, 0);\n        emit createdNewDemand(msg.sender, demandID);\n    }\n\n\t/// @notice Function to create a supply\n\t/// @dev will return an event with the event-Id\n    function createSupply\n    (\n        uint _assetId,\n        string memory _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power,\n        uint _price\n    )\n        public\n     {\n        uint[] memory assetIdInternal = new uint[](1); \n        \n        assetIdInternal[0] = _assetId;         \n\n     //   require(AssetGeneralInterface(assetContractLookup.assetProducingRegistry()).getAssetOwner(_assetId) == msg.sender, \"wrong msg.sender\");\n        uint supplyID = db.createSupply(assetIdInternal, _regionId, _dateTimeFrom, _dateTimeTo, _power, 0, _price);\n\n        for(uint i=0; i < assetIdInternal.length;i++){\n           SonnenAssetProducingInterface(assetContractLookup.assetProducingRegistry()).addSonnenAssetToSupply(assetIdInternal[i], supplyID);\n        }\n        emit createdNewSupply(msg.sender, supplyID);\n\n\n    }\n\n\t/// @notice function to return the length of the allDemands-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllDemandListLength() external view returns (uint) {\n        return db.getAllDemandListLength();\n    }\n\n\t/// @notice function to return the length of the allSupply-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllSupplyListLength() external view returns (uint) {\n        return db.getAllSupplyListLength();\n    }\n\n\t/// @notice Returns the information of a demand\n\t/// @param _demandId index of the demand in the allDemands-array\n\t/// @return propertiesDocumentHash, documentDBURL and owner\n    function getDemand(uint _demandId)\n        external\n        view\n        returns (\n            string memory _regionId,\n            uint _dataTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _matchedPower\n        )\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n            _regionId = demand.regionId;\n            _dataTimeFrom = demand.dateTimeFrom;\n            _dateTimeTo = demand.dateTimeTo;\n            _power = demand.power;\n            _matchedPower = demand.matchedPower;\n    }\n\n    function getSupplyStruct(uint _supplyId) external view returns (MarketDB.Supply memory){\n        return db.getSupply(_supplyId);\n    }\n\n\n\t/// @notice gets a supply\n\t/// @param _supplyId the supply Id\n\t/// @return the supply\n    function getSupply(uint _supplyId)\n        public\n        view\n        returns (\n            uint _assetId,\n            string memory _regionId,\n            uint _dateTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _matchedPower,\n            uint _price\n        )\n    {\n        \n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n        _assetId = supply.assetId[0];\n        _regionId = supply.regionId;\n        _dateTimeFrom = supply.dateTimeFrom;\n        _dateTimeTo = supply.dateTimeTo; \n        _power = supply.power;\n        _matchedPower = supply.matchedPower;\n        _price = supply.price;\n\n        \n    }\n\n    function setDemandMatchedPower(\n        uint _demandId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n\n        // Overflow check\n        assert(demand.matchedPower + _power >= demand.matchedPower);\n        require(demand.matchedPower + _power <= demand.power,\"too much power for demand\");\n\n        db.setDemandMatchedPower(_demandId, _power);\n    }\n\n    function setSupplyMatchedPower(\n        uint _supplyId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n\n        // Overflow check\n        assert(supply.matchedPower + _power >= supply.matchedPower);\n\n        uint agreementId = getAgreementForSupplyPublic(_supplyId);\n        \n        uint demandId= db.getAgreementDB(agreementId).demandId;\n        MarketDB.Demand memory demand = db.getDemand(demandId);\n    \n        uint powerStillOpen = demand.power - demand.matchedPower; \n\n        if(powerStillOpen >= _power) {\n            db.setSupplyMatchedPower(_supplyId, supply.matchedPower +_power);\n        } else {\n            uint diff = _power - powerStillOpen;\n            uint matchedPower = _power - diff;\n            db.setSupplyMatchedPower(_supplyId,supply.matchedPower + matchedPower);\n        }\n    }\n\n    function getDemandForAgreement(uint _agreementId) external view returns (uint _demandId){\n         MarketDB.Agreement memory a = db.getAgreementDB(_agreementId);\n\n         return a.demandId;\n    }\n\n\n}\n", "networks": "{}" }
