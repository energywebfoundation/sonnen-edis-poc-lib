{"abi":[{"constant":false,"inputs":[{"name":"_supplyId","type":"uint256"}],"name":"abortSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_assetId","type":"uint256"},{"name":"_regionId","type":"string"},{"name":"_dateTimeFrom","type":"uint256"},{"name":"_dateTimeTo","type":"uint256"},{"name":"_power","type":"uint256"},{"name":"_baselinePower","type":"uint256"},{"name":"_price","type":"uint256"}],"name":"createSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_regionId","type":"string"},{"name":"_dateTimeFrom","type":"uint256"},{"name":"_dateTimeTo","type":"uint256"},{"name":"_power","type":"uint256"}],"name":"createDemand","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_demandId","type":"uint256"}],"name":"getDemand","outputs":[{"name":"_regionId","type":"string"},{"name":"_dataTimeFrom","type":"uint256"},{"name":"_dateTimeTo","type":"uint256"},{"name":"_power","type":"uint256"},{"name":"_matchedPower","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newLogic","type":"address"}],"name":"update","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_supplyId","type":"uint256"}],"name":"getSupplyStruct","outputs":[{"components":[{"name":"assetId","type":"uint256[]"},{"name":"regionId","type":"string"},{"name":"dateTimeFrom","type":"uint256"},{"name":"dateTimeTo","type":"uint256"},{"name":"power","type":"uint256"},{"name":"baselinePower","type":"uint256"},{"name":"matchedPower","type":"uint256"},{"name":"price","type":"uint256"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAllAgreementListLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_agreementId","type":"uint256"}],"name":"getDemandForAgreement","outputs":[{"name":"_demandId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"userContractLookup","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_demandId","type":"uint256"},{"name":"_supplyId","type":"uint256"}],"name":"createAgreement","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"db","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_agreementId","type":"uint256"}],"name":"getAgreement","outputs":[{"name":"_demandId","type":"uint256"},{"name":"_supplyIds","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_demandId","type":"uint256"},{"name":"_power","type":"uint256"}],"name":"setDemandMatchedPower","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_agreementId","type":"uint256"}],"name":"getDemandForAgreementPublic","outputs":[{"name":"_demandId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAllSupplyListLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"assetContractLookup","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_supplyId","type":"uint256"}],"name":"getAgreementForSupplyPublic","outputs":[{"name":"_agreementId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_supplyId","type":"uint256"}],"name":"getAgreementForSupply","outputs":[{"name":"_agreementId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_role","type":"uint8"},{"name":"_caller","type":"address"}],"name":"isRole","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_agreementId","type":"uint256"}],"name":"getAgreementStruct","outputs":[{"components":[{"name":"demandId","type":"uint256"},{"name":"supplyId","type":"uint256[]"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_supplyId","type":"uint256"},{"name":"_power","type":"uint256"}],"name":"setSupplyMatchedPower","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_database","type":"address"},{"name":"_admin","type":"address"}],"name":"init","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_supplyId","type":"uint256"}],"name":"getSupply","outputs":[{"name":"_assetId","type":"uint256"},{"name":"_regionId","type":"string"},{"name":"_dateTimeFrom","type":"uint256"},{"name":"_dateTimeTo","type":"uint256"},{"name":"_power","type":"uint256"},{"name":"_baselinePower","type":"uint256"},{"name":"_matchedPower","type":"uint256"},{"name":"_price","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAllDemandListLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_assetContractLookup","type":"address"},{"name":"_marketContractLookup","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_sender","type":"address"},{"indexed":true,"name":"_demandId","type":"uint256"}],"name":"createdNewDemand","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_sender","type":"address"},{"indexed":true,"name":"_supplyId","type":"uint256"}],"name":"createdNewSupply","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_agreementId","type":"uint256"},{"indexed":true,"name":"_demandId","type":"uint256"},{"indexed":true,"name":"_supplyId","type":"uint256"}],"name":"LogAgreementFullySigned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_agreementId","type":"uint256"},{"indexed":true,"name":"_demandId","type":"uint256"}],"name":"LogAgreementCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_newOwner","type":"address"}],"name":"LogChangeOwner","type":"event"}],"bytecode":"60806040523480156200001157600080fd5b5060405160408062002db483398101806040526200003391908101906200015b565b818181600160a060020a0316635c7460d66040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156200008b57600080fd5b505afa158015620000a0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620000c6919081019062000132565b60008054600160a060020a03938416600160a060020a03199182161790915560018054928416928216929092179091556003805493909216921691909117905550620001c69050565b60006200011d82516200019a565b9392505050565b60006200011d8251620001ad565b6000602082840312156200014557600080fd5b60006200015384846200010f565b949350505050565b600080604083850312156200016f57600080fd5b60006200017d858562000124565b9250506020620001908582860162000124565b9150509250929050565b6000620001a782620001ba565b92915050565b6000620001a7826200019a565b600160a060020a031690565b612bde80620001d66000396000f3fe608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063610b350f116100f2578063b3dfe5d51161009b578063e182fb7411610075578063e182fb741461037c578063f09a40161461038f578063f77ee79d146103a2578063f9e170db146103c9576101b2565b8063b3dfe5d514610329578063bb5a389e1461033c578063da119ed11461035c576101b2565b80638da5cb5b116100cc5780638da5cb5b146102ee5780639a525f0d14610303578063a6f9dae114610316576101b2565b8063610b350f14610267578063639decca146102de5780636c608004146102e6576101b2565b806323dc20731161015f57806344ce97c91161013957806344ce97c91461028f5780634d655aff146102a25780634f9f6fe6146102aa5780635266ddaa146102cb576101b2565b806323dc207314610252578063412a68d61461026757806344724c8c1461027a576101b2565b80631ac2733c116101905780631ac2733c146101f25780631c1b87721461021f5780631df954bd14610232576101b2565b806307800d3f146101b75780630ac0dfaf146101cc57806317fe7eb5146101df575b600080fd5b6101ca6101c53660046122b4565b6103d1565b005b6101ca6101da3660046122f0565b610671565b6101ca6101ed36600461217a565b6108b7565b6102056102003660046122b4565b6109d2565b6040516102169594939291906128c5565b60405180910390f35b6101ca61022d3660046120dd565b610aa8565b6102456102403660046122b4565b610b58565b6040516102169190612997565b61025a610c03565b60405161021691906129a8565b61025a6102753660046122b4565b610c9e565b610282610d4d565b6040516102169190612864565b6101ca61029d3660046123a4565b610d5c565b610282611017565b6102bd6102b83660046122b4565b611026565b604051610216929190612a55565b6101ca6102d93660046123a4565b6110fa565b61025a611266565b6102826112c4565b6102f66112d3565b60405161021691906127b7565b61025a6103113660046122b4565b6112e2565b6101ca6103243660046120dd565b6113b8565b61025a6103373660046122b4565b61147d565b61034f61034a36600461215b565b61155c565b6040516102169190612856565b61036f61036a3660046122b4565b611687565b6040516102169190612986565b6101ca61038a3660046123a4565b61172c565b6101ca61039d366004612121565b611a6e565b6103b56103b03660046122b4565b611b01565b6040516102169897969594939291906129f1565b61025a611c0f565b6103d9611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906104229085906004016129a8565b604080518083038186803b15801561043957600080fd5b505afa15801561044d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104719190810190612261565b6020810151909150156104a757604051600080516020612b85833981519152815260040161049e90612926565b60405180910390fd5b6104af611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f89086906004016129a8565b60006040518083038186803b15801561051057600080fd5b505afa158015610524573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054c919081019061227f565b905060005b81515181101561066b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ac57600080fd5b505afa1580156105c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e49190810190612103565b600160a060020a031663d657c9b283600001518381518110151561060457fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062d91906129a8565b600060405180830381600087803b15801561064757600080fd5b505af115801561065b573d6000803e3d6000fd5b5050600190920191506105519050565b50505050565b60408051600180825281830190925260609160208083019080388339019050509050878160008151811015156106a357fe5b602090810290910101526002546040517f011a1996000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063011a1996906107059085908c908c908c908c908c908a908d906004016127d3565b602060405180830381600087803b15801561071f57600080fd5b505af1158015610733573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061075791908101906122d2565b905060005b825181101561087357600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156107b657600080fd5b505afa1580156107ca573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107ee9190810190612103565b600160a060020a03166358c0dd60848381518110151561080a57fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401610835929190612a55565b600060405180830381600087803b15801561084f57600080fd5b505af1158015610863573d6000803e3d6000fd5b50506001909201915061075c9050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd336040516108a491906127c5565b60405180910390a2505050505050505050565b60046108c3813361155c565b15156108e957604051600080516020612b85833981519152815260040161049e90612936565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a9061093d908a908a908a908a908a908990600401612872565b602060405180830381600087803b15801561095757600080fd5b505af115801561096b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061098f91908101906122d2565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c395725336040516109c191906127c5565b60405180910390a250505050505050565b60606000806000806109e2611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90610a2b908a906004016129a8565b60006040518083038186803b158015610a4357600080fd5b505afa158015610a57573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610a7f919081019061222c565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a03163314610ada57604051600080516020612b85833981519152815260040161049e90612946565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae190610b239084906004016127b7565b600060405180830381600087803b158015610b3d57600080fd5b505af1158015610b51573d6000803e3d6000fd5b5050505050565b610b60611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610ba99085906004016129a8565b60006040518083038186803b158015610bc157600080fd5b505afa158015610bd5573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610bfd919081019061227f565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610c6157600080fd5b505afa158015610c75573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610c9991908101906122d2565b905090565b6000610ca8611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610cf19086906004016129a8565b60006040518083038186803b158015610d0957600080fd5b505afa158015610d1d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610d4591908101906121f7565b519392505050565b600154600160a060020a031681565b6040805160018082528183019092526060916020808301908038833901905050905081816000815181101515610d8e57fe5b602090810290910101526002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610de490879086906004016129d1565b602060405180830381600087803b158015610dfe57600080fd5b505af1158015610e12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e3691908101906122d2565b905060005b8251811015610b5157610e4c611c84565b6002548451600160a060020a039091169063f77ee79d90869085908110610e6f57fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610e9891906129a8565b60006040518083038186803b158015610eb057600080fd5b505afa158015610ec4573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610eec919081019061227f565b905060005b81515181101561100d57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610f4c57600080fd5b505afa158015610f60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610f849190810190612103565b600160a060020a03166380c5ccc7836000015183815181101515610fa457fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610fcf9291906129b6565b600060405180830381600087803b158015610fe957600080fd5b505af1158015610ffd573d6000803e3d6000fd5b505060019092019150610ef19050565b5050600101610e3b565b600254600160a060020a031681565b600080611031611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec46569061107a9087906004016129a8565b60006040518083038186803b15801561109257600080fd5b505afa1580156110a6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526110ce91908101906121f7565b80516020820151805191955091925060009081106110e857fe5b90602001906020020151915050915091565b611102611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c9061114b9086906004016129a8565b60006040518083038186803b15801561116357600080fd5b505afa158015611177573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261119f919081019061222c565b608081015190915082810110156111b257fe5b60608101516080820151830111156111e457604051600080516020612b85833981519152815260040161049e90612966565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa9061122f9086908690600401612a55565b600060405180830381600087803b15801561124957600080fd5b505af115801561125d573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610c6157600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b60006112ec611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906113359086906004016129a8565b604080518083038186803b15801561134c57600080fd5b505afa158015611360573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506113849190810190612261565b9050806020015115156113b157604051600080516020612b85833981519152815260040161049e90612956565b5192915050565b600054600160a060020a031633146113ea57604051600080516020612b85833981519152815260040161049e90612946565b600160a060020a038116151561141a57604051600080516020612b85833981519152815260040161049e90612916565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16906114729083906127b7565b60405180910390a150565b6000611487611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906114d09086906004016129a8565b604080518083038186803b1580156114e757600080fd5b505afa1580156114fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061151f9190810190612261565b90508060200151151561154c57604051600080516020612b85833981519152815260040161049e90612956565b611555836112e2565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156115b057600080fd5b505afa1580156115c4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115e89190810190612103565b600160a060020a031663265209f2846040518263ffffffff1660e060020a02815260040161161691906127b7565b60206040518083038186803b15801561162e57600080fd5b505afa158015611642573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061166691908101906122d2565b9050600084600581111561167657fe5b60020a919091161515949350505050565b61168f611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec4656906116d89085906004016129a8565b60006040518083038186803b1580156116f057600080fd5b505afa158015611704573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610bfd91908101906121f7565b611734611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d9061177d9086906004016129a8565b60006040518083038186803b15801561179557600080fd5b505afa1580156117a9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526117d1919081019061227f565b60c081015190915082810110156117e457fe5b60006117ef846112e2565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec46569061183e9085906004016129a8565b60006040518083038186803b15801561185657600080fd5b505afa15801561186a573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261189291908101906121f7565b51905061189d611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906118e69085906004016129a8565b60006040518083038186803b1580156118fe57600080fd5b505afa158015611912573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261193a919081019061222c565b6080810151606082015191925090038581106119d85760025460c08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb74916119a1918b918b0190600401612a55565b600060405180830381600087803b1580156119bb57600080fd5b505af11580156119cf573d6000803e3d6000fd5b5050505061125d565b60025460c08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb7491611a31918d91860190600401612a55565b600060405180830381600087803b158015611a4b57600080fd5b505af1158015611a5f573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a03163314611aa057604051600080516020612b85833981519152815260040161049e90612946565b600254600160a060020a031615611ad157604051600080516020612b85833981519152815260040161049e90612976565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60006060600080600080600080611b16611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611b5f908d906004016129a8565b60006040518083038186803b158015611b7757600080fd5b505afa158015611b8b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611bb3919081019061227f565b80518051919250906000908110611bc657fe5b906020019060200201519850806020015197508060400151965080606001519550806080015194508060a0015193508060c0015192508060e00151915050919395975091939597565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610c6157600080fd5b604080518082019091526000808252602082015290565b6101006040519081016040528060608152602001606081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b60006115558235612af3565b60006115558251612af3565b6000601f82018313611d3b57600080fd5b8151611d4e611d4982612a97565b612a70565b91508181835260208401935060208101905083856020840282011115611d7357600080fd5b60005b83811015611d9f5781611d8988826120d1565b8452506020928301929190910190600101611d76565b5050505092915050565b60006115558251612afe565b60006115558235612b12565b600080601f83018413611dd357600080fd5b50813567ffffffffffffffff811115611deb57600080fd5b602083019150836001820283011115611e0357600080fd5b9250929050565b6000601f82018313611e1b57600080fd5b8151611e29611d4982612ab8565b91508082526020830160208301858383011115611e4557600080fd5b611e50838284612b4e565b50505092915050565b6000601f82018313611e6a57600080fd5b8135611e78611d4982612ab8565b91508082526020830160208301858383011115611e9457600080fd5b611e50838284612b42565b600060408284031215611eb157600080fd5b611ebb6040612a70565b90506000611ec984846120d1565b825250602082015167ffffffffffffffff811115611ee657600080fd5b611ef284828501611d2a565b60208301525092915050565b600060a08284031215611f1057600080fd5b611f1a60a0612a70565b825190915067ffffffffffffffff811115611f3457600080fd5b611f4084828501611e0a565b8252506020611f51848483016120d1565b6020830152506040611f65848285016120d1565b6040830152506060611f79848285016120d1565b6060830152506080611f8d848285016120d1565b60808301525092915050565b600060408284031215611fab57600080fd5b611fb56040612a70565b90506000611fc384846120d1565b8252506020611ef284848301611da9565b60006101008284031215611fe757600080fd5b611ff2610100612a70565b825190915067ffffffffffffffff81111561200c57600080fd5b61201884828501611d2a565b825250602082015167ffffffffffffffff81111561203557600080fd5b61204184828501611e0a565b6020830152506040612055848285016120d1565b6040830152506060612069848285016120d1565b606083015250608061207d848285016120d1565b60808301525060a0612091848285016120d1565b60a08301525060c06120a5848285016120d1565b60c08301525060e06120b9848285016120d1565b60e08301525092915050565b60006115558235612b0f565b60006115558251612b0f565b6000602082840312156120ef57600080fd5b60006120fb8484611d12565b949350505050565b60006020828403121561211557600080fd5b60006120fb8484611d1e565b6000806040838503121561213457600080fd5b60006121408585611d12565b925050602061215185828601611d12565b9150509250929050565b6000806040838503121561216e57600080fd5b60006121408585611db5565b60008060008060006080868803121561219257600080fd5b853567ffffffffffffffff8111156121a957600080fd5b6121b588828901611dc1565b955095505060206121c8888289016120c5565b93505060406121d9888289016120c5565b92505060606121ea888289016120c5565b9150509295509295909350565b60006020828403121561220957600080fd5b815167ffffffffffffffff81111561222057600080fd5b6120fb84828501611e9f565b60006020828403121561223e57600080fd5b815167ffffffffffffffff81111561225557600080fd5b6120fb84828501611efe565b60006040828403121561227357600080fd5b60006120fb8484611f99565b60006020828403121561229157600080fd5b815167ffffffffffffffff8111156122a857600080fd5b6120fb84828501611fd4565b6000602082840312156122c657600080fd5b60006120fb84846120c5565b6000602082840312156122e457600080fd5b60006120fb84846120d1565b600080600080600080600060e0888a03121561230b57600080fd5b60006123178a8a6120c5565b975050602088013567ffffffffffffffff81111561233457600080fd5b6123408a828b01611e59565b96505060406123518a828b016120c5565b95505060606123628a828b016120c5565b94505060806123738a828b016120c5565b93505060a06123848a828b016120c5565b92505060c06123958a828b016120c5565b91505092959891949750929550565b600080604083850312156123b757600080fd5b60006123c385856120c5565b9250506020612151858286016120c5565b60006123e083836127ae565b505060200190565b6123f181612b25565b82525050565b6123f181612af3565b600061240b82612ae6565b6124158185612aea565b935061242083612ae0565b60005b8281101561244b576124368683516123d4565b955061244182612ae0565b9150600101612423565b5093949350505050565b600061246082612ae6565b61246a8185612aea565b935061247583612ae0565b60005b8281101561244b5761248b8683516123d4565b955061249682612ae0565b9150600101612478565b6123f181612afe565b6123f181612b2c565b6123f181612b37565b60006124c78385612aea565b93506124d4838584612b42565b6124dd83612b7a565b9093019392505050565b60006124f282612ae6565b6124fc8185612aea565b935061250c818560208601612b4e565b6124dd81612b7a565b6000612522601883612aea565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b600061255b601d83612aea565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b6000612594602483612aea565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006125f3601783612aea565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b600061262c601283612aea565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b6000612665601983612aea565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b600061269e601883612aea565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b805160009060408401906126de85826127ae565b50602083015184820360208601526126f68282612455565b95945050505050565b8051610100808452600091908401906127188282612455565b9150506020830151848203602086015261273282826124e7565b915050604083015161274760408601826127ae565b50606083015161275a60608601826127ae565b50608083015161276d60808601826127ae565b5060a083015161278060a08601826127ae565b5060c083015161279360c08601826127ae565b5060e08301516127a660e08601826127ae565b509392505050565b6123f181612b0f565b60208101610bfd82846123f7565b60208101610bfd82846123e8565b61010080825281016127e5818b612400565b905081810360208301526127f9818a6124e7565b905061280860408301896127ae565b61281560608301886127ae565b61282260808301876127ae565b61282f60a08301866127ae565b61283c60c08301856124b2565b61284960e08301846127ae565b9998505050505050505050565b60208101610bfd82846124a0565b60208101610bfd82846124a9565b60a0808252810161288481888a6124bb565b905061289360208301876127ae565b6128a060408301866127ae565b6128ad60608301856127ae565b6128ba60808301846124b2565b979650505050505050565b60a080825281016128d681886124e7565b90506128e560208301876127ae565b6128f260408301866127ae565b6128ff60608301856127ae565b61290c60808301846127ae565b9695505050505050565b60208082528101610bfd81612515565b60208082528101610bfd8161254e565b60208082528101610bfd81612587565b60208082528101610bfd816125e6565b60208082528101610bfd8161261f565b60208082528101610bfd81612658565b60208082528101610bfd81612691565b6020808252810161155581846126ca565b6020808252810161155581846126ff565b60208101610bfd82846127ae565b604081016129c482856127ae565b61155560208301846123e8565b604081016129df82856127ae565b81810360208301526120fb8184612400565b6101008101612a00828b6127ae565b8181036020830152612a12818a6124e7565b9050612a2160408301896127ae565b612a2e60608301886127ae565b612a3b60808301876127ae565b612a4860a08301866127ae565b61283c60c08301856127ae565b60408101612a6382856127ae565b61155560208301846127ae565b60405181810167ffffffffffffffff81118282101715612a8f57600080fd5b604052919050565b600067ffffffffffffffff821115612aae57600080fd5b5060209081020190565b600067ffffffffffffffff821115612acf57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b6000610bfd82612b03565b151590565b600160a060020a031690565b90565b600060068210612b2157600080fd5b5090565b6000610bfd825b6000610bfd82612af3565b6000610bfd82612b0f565b82818337506000910152565b60005b83811015612b69578181015183820152602001612b51565b8381111561066b5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a723058207958c7e15fa3b8b4f6d303ca101cc65e86bf09ed4a05b480d2256db7997314096c6578706572696d656e74616cf50037","contractName":"MarketLogic","deployedBytecode":"608060405234801561001057600080fd5b50600436106101b25760003560e060020a90048063610b350f116100f2578063b3dfe5d51161009b578063e182fb7411610075578063e182fb741461037c578063f09a40161461038f578063f77ee79d146103a2578063f9e170db146103c9576101b2565b8063b3dfe5d514610329578063bb5a389e1461033c578063da119ed11461035c576101b2565b80638da5cb5b116100cc5780638da5cb5b146102ee5780639a525f0d14610303578063a6f9dae114610316576101b2565b8063610b350f14610267578063639decca146102de5780636c608004146102e6576101b2565b806323dc20731161015f57806344ce97c91161013957806344ce97c91461028f5780634d655aff146102a25780634f9f6fe6146102aa5780635266ddaa146102cb576101b2565b806323dc207314610252578063412a68d61461026757806344724c8c1461027a576101b2565b80631ac2733c116101905780631ac2733c146101f25780631c1b87721461021f5780631df954bd14610232576101b2565b806307800d3f146101b75780630ac0dfaf146101cc57806317fe7eb5146101df575b600080fd5b6101ca6101c53660046122b4565b6103d1565b005b6101ca6101da3660046122f0565b610671565b6101ca6101ed36600461217a565b6108b7565b6102056102003660046122b4565b6109d2565b6040516102169594939291906128c5565b60405180910390f35b6101ca61022d3660046120dd565b610aa8565b6102456102403660046122b4565b610b58565b6040516102169190612997565b61025a610c03565b60405161021691906129a8565b61025a6102753660046122b4565b610c9e565b610282610d4d565b6040516102169190612864565b6101ca61029d3660046123a4565b610d5c565b610282611017565b6102bd6102b83660046122b4565b611026565b604051610216929190612a55565b6101ca6102d93660046123a4565b6110fa565b61025a611266565b6102826112c4565b6102f66112d3565b60405161021691906127b7565b61025a6103113660046122b4565b6112e2565b6101ca6103243660046120dd565b6113b8565b61025a6103373660046122b4565b61147d565b61034f61034a36600461215b565b61155c565b6040516102169190612856565b61036f61036a3660046122b4565b611687565b6040516102169190612986565b6101ca61038a3660046123a4565b61172c565b6101ca61039d366004612121565b611a6e565b6103b56103b03660046122b4565b611b01565b6040516102169897969594939291906129f1565b61025a611c0f565b6103d9611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906104229085906004016129a8565b604080518083038186803b15801561043957600080fd5b505afa15801561044d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104719190810190612261565b6020810151909150156104a757604051600080516020612b85833981519152815260040161049e90612926565b60405180910390fd5b6104af611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d906104f89086906004016129a8565b60006040518083038186803b15801561051057600080fd5b505afa158015610524573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261054c919081019061227f565b905060005b81515181101561066b57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156105ac57600080fd5b505afa1580156105c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105e49190810190612103565b600160a060020a031663d657c9b283600001518381518110151561060457fe5b906020019060200201516040518263ffffffff1660e060020a02815260040161062d91906129a8565b600060405180830381600087803b15801561064757600080fd5b505af115801561065b573d6000803e3d6000fd5b5050600190920191506105519050565b50505050565b60408051600180825281830190925260609160208083019080388339019050509050878160008151811015156106a357fe5b602090810290910101526002546040517f011a1996000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063011a1996906107059085908c908c908c908c908c908a908d906004016127d3565b602060405180830381600087803b15801561071f57600080fd5b505af1158015610733573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061075791908101906122d2565b905060005b825181101561087357600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156107b657600080fd5b505afa1580156107ca573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107ee9190810190612103565b600160a060020a03166358c0dd60848381518110151561080a57fe5b90602001906020020151846040518363ffffffff1660e060020a028152600401610835929190612a55565b600060405180830381600087803b15801561084f57600080fd5b505af1158015610863573d6000803e3d6000fd5b50506001909201915061075c9050565b50807faa5c34b3c0a272360719c3e71fec229f4fb0595f7c4ee0dc80121fed02b6b4cd336040516108a491906127c5565b60405180910390a2505050505050505050565b60046108c3813361155c565b15156108e957604051600080516020612b85833981519152815260040161049e90612936565b6002546040517fdd4d3b6a000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063dd4d3b6a9061093d908a908a908a908a908a908990600401612872565b602060405180830381600087803b15801561095757600080fd5b505af115801561096b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061098f91908101906122d2565b9050807f9c9adc3d2d4b1b75818c2cba3bbb1b0c263b2a5ea239a548aef303809c395725336040516109c191906127c5565b60405180910390a250505050505050565b60606000806000806109e2611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c90610a2b908a906004016129a8565b60006040518083038186803b158015610a4357600080fd5b505afa158015610a57573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610a7f919081019061222c565b8051602082015160408301516060840151608090940151929b919a509850919650945092505050565b600054600160a060020a03163314610ada57604051600080516020612b85833981519152815260040161049e90612946565b6002546040517fa6f9dae1000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063a6f9dae190610b239084906004016127b7565b600060405180830381600087803b158015610b3d57600080fd5b505af1158015610b51573d6000803e3d6000fd5b5050505050565b610b60611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90610ba99085906004016129a8565b60006040518083038186803b158015610bc157600080fd5b505afa158015610bd5573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610bfd919081019061227f565b92915050565b600254604080517f03cb53ec0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a0316916303cb53ec916004808301926020929190829003018186803b158015610c6157600080fd5b505afa158015610c75573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610c9991908101906122d2565b905090565b6000610ca8611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec465690610cf19086906004016129a8565b60006040518083038186803b158015610d0957600080fd5b505afa158015610d1d573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610d4591908101906121f7565b519392505050565b600154600160a060020a031681565b6040805160018082528183019092526060916020808301908038833901905050905081816000815181101515610d8e57fe5b602090810290910101526002546040517f9b0c1f9c000000000000000000000000000000000000000000000000000000008152600091600160a060020a031690639b0c1f9c90610de490879086906004016129d1565b602060405180830381600087803b158015610dfe57600080fd5b505af1158015610e12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e3691908101906122d2565b905060005b8251811015610b5157610e4c611c84565b6002548451600160a060020a039091169063f77ee79d90869085908110610e6f57fe5b906020019060200201516040518263ffffffff1660e060020a028152600401610e9891906129a8565b60006040518083038186803b158015610eb057600080fd5b505afa158015610ec4573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610eec919081019061227f565b905060005b81515181101561100d57600360009054906101000a9004600160a060020a0316600160a060020a03166324a793c46040518163ffffffff1660e060020a02815260040160206040518083038186803b158015610f4c57600080fd5b505afa158015610f60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610f849190810190612103565b600160a060020a03166380c5ccc7836000015183815181101515610fa457fe5b90602001906020020151336040518363ffffffff1660e060020a028152600401610fcf9291906129b6565b600060405180830381600087803b158015610fe957600080fd5b505af1158015610ffd573d6000803e3d6000fd5b505060019092019150610ef19050565b5050600101610e3b565b600254600160a060020a031681565b600080611031611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec46569061107a9087906004016129a8565b60006040518083038186803b15801561109257600080fd5b505afa1580156110a6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526110ce91908101906121f7565b80516020820151805191955091925060009081106110e857fe5b90602001906020020151915050915091565b611102611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c9061114b9086906004016129a8565b60006040518083038186803b15801561116357600080fd5b505afa158015611177573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261119f919081019061222c565b608081015190915082810110156111b257fe5b60608101516080820151830111156111e457604051600080516020612b85833981519152815260040161049e90612966565b6002546040517f5266ddaa000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690635266ddaa9061122f9086908690600401612a55565b600060405180830381600087803b15801561124957600080fd5b505af115801561125d573d6000803e3d6000fd5b50505050505050565b600254604080517f639decca0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163639decca916004808301926020929190829003018186803b158015610c6157600080fd5b600354600160a060020a031681565b600054600160a060020a031681565b60006112ec611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906113359086906004016129a8565b604080518083038186803b15801561134c57600080fd5b505afa158015611360573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506113849190810190612261565b9050806020015115156113b157604051600080516020612b85833981519152815260040161049e90612956565b5192915050565b600054600160a060020a031633146113ea57604051600080516020612b85833981519152815260040161049e90612946565b600160a060020a038116151561141a57604051600080516020612b85833981519152815260040161049e90612916565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0383161790556040517f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16906114729083906127b7565b60405180910390a150565b6000611487611c6d565b6002546040517fb3dfe5d5000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063b3dfe5d5906114d09086906004016129a8565b604080518083038186803b1580156114e757600080fd5b505afa1580156114fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061151f9190810190612261565b90508060200151151561154c57604051600080516020612b85833981519152815260040161049e90612956565b611555836112e2565b9392505050565b600080600160009054906101000a9004600160a060020a0316600160a060020a0316635c7460d66040518163ffffffff1660e060020a02815260040160206040518083038186803b1580156115b057600080fd5b505afa1580156115c4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115e89190810190612103565b600160a060020a031663265209f2846040518263ffffffff1660e060020a02815260040161161691906127b7565b60206040518083038186803b15801561162e57600080fd5b505afa158015611642573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061166691908101906122d2565b9050600084600581111561167657fe5b60020a919091161515949350505050565b61168f611cfa565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906351ec4656906116d89085906004016129a8565b60006040518083038186803b1580156116f057600080fd5b505afa158015611704573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610bfd91908101906121f7565b611734611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d9061177d9086906004016129a8565b60006040518083038186803b15801561179557600080fd5b505afa1580156117a9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526117d1919081019061227f565b60c081015190915082810110156117e457fe5b60006117ef846112e2565b6002546040517f51ec4656000000000000000000000000000000000000000000000000000000008152919250600091600160a060020a03909116906351ec46569061183e9085906004016129a8565b60006040518083038186803b15801561185657600080fd5b505afa15801561186a573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261189291908101906121f7565b51905061189d611cca565b6002546040517f1ac2733c000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631ac2733c906118e69085906004016129a8565b60006040518083038186803b1580156118fe57600080fd5b505afa158015611912573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261193a919081019061222c565b6080810151606082015191925090038581106119d85760025460c08601516040517fe182fb74000000000000000000000000000000000000000000000000000000008152600160a060020a039092169163e182fb74916119a1918b918b0190600401612a55565b600060405180830381600087803b1580156119bb57600080fd5b505af11580156119cf573d6000803e3d6000fd5b5050505061125d565b60025460c08601516040517fe182fb7400000000000000000000000000000000000000000000000000000000815283890392838a0392600160a060020a039091169163e182fb7491611a31918d91860190600401612a55565b600060405180830381600087803b158015611a4b57600080fd5b505af1158015611a5f573d6000803e3d6000fd5b50505050505050505050505050565b600054600160a060020a03163314611aa057604051600080516020612b85833981519152815260040161049e90612946565b600254600160a060020a031615611ad157604051600080516020612b85833981519152815260040161049e90612976565b506002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60006060600080600080600080611b16611c84565b6002546040517ff77ee79d000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063f77ee79d90611b5f908d906004016129a8565b60006040518083038186803b158015611b7757600080fd5b505afa158015611b8b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052611bb3919081019061227f565b80518051919250906000908110611bc657fe5b906020019060200201519850806020015197508060400151965080606001519550806080015194508060a0015193508060c0015192508060e00151915050919395975091939597565b600254604080517ff9e170db0000000000000000000000000000000000000000000000000000000081529051600092600160a060020a03169163f9e170db916004808301926020929190829003018186803b158015610c6157600080fd5b604080518082019091526000808252602082015290565b6101006040519081016040528060608152602001606081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60a06040519081016040528060608152602001600081526020016000815260200160008152602001600081525090565b60408051808201909152600081526060602082015290565b60006115558235612af3565b60006115558251612af3565b6000601f82018313611d3b57600080fd5b8151611d4e611d4982612a97565b612a70565b91508181835260208401935060208101905083856020840282011115611d7357600080fd5b60005b83811015611d9f5781611d8988826120d1565b8452506020928301929190910190600101611d76565b5050505092915050565b60006115558251612afe565b60006115558235612b12565b600080601f83018413611dd357600080fd5b50813567ffffffffffffffff811115611deb57600080fd5b602083019150836001820283011115611e0357600080fd5b9250929050565b6000601f82018313611e1b57600080fd5b8151611e29611d4982612ab8565b91508082526020830160208301858383011115611e4557600080fd5b611e50838284612b4e565b50505092915050565b6000601f82018313611e6a57600080fd5b8135611e78611d4982612ab8565b91508082526020830160208301858383011115611e9457600080fd5b611e50838284612b42565b600060408284031215611eb157600080fd5b611ebb6040612a70565b90506000611ec984846120d1565b825250602082015167ffffffffffffffff811115611ee657600080fd5b611ef284828501611d2a565b60208301525092915050565b600060a08284031215611f1057600080fd5b611f1a60a0612a70565b825190915067ffffffffffffffff811115611f3457600080fd5b611f4084828501611e0a565b8252506020611f51848483016120d1565b6020830152506040611f65848285016120d1565b6040830152506060611f79848285016120d1565b6060830152506080611f8d848285016120d1565b60808301525092915050565b600060408284031215611fab57600080fd5b611fb56040612a70565b90506000611fc384846120d1565b8252506020611ef284848301611da9565b60006101008284031215611fe757600080fd5b611ff2610100612a70565b825190915067ffffffffffffffff81111561200c57600080fd5b61201884828501611d2a565b825250602082015167ffffffffffffffff81111561203557600080fd5b61204184828501611e0a565b6020830152506040612055848285016120d1565b6040830152506060612069848285016120d1565b606083015250608061207d848285016120d1565b60808301525060a0612091848285016120d1565b60a08301525060c06120a5848285016120d1565b60c08301525060e06120b9848285016120d1565b60e08301525092915050565b60006115558235612b0f565b60006115558251612b0f565b6000602082840312156120ef57600080fd5b60006120fb8484611d12565b949350505050565b60006020828403121561211557600080fd5b60006120fb8484611d1e565b6000806040838503121561213457600080fd5b60006121408585611d12565b925050602061215185828601611d12565b9150509250929050565b6000806040838503121561216e57600080fd5b60006121408585611db5565b60008060008060006080868803121561219257600080fd5b853567ffffffffffffffff8111156121a957600080fd5b6121b588828901611dc1565b955095505060206121c8888289016120c5565b93505060406121d9888289016120c5565b92505060606121ea888289016120c5565b9150509295509295909350565b60006020828403121561220957600080fd5b815167ffffffffffffffff81111561222057600080fd5b6120fb84828501611e9f565b60006020828403121561223e57600080fd5b815167ffffffffffffffff81111561225557600080fd5b6120fb84828501611efe565b60006040828403121561227357600080fd5b60006120fb8484611f99565b60006020828403121561229157600080fd5b815167ffffffffffffffff8111156122a857600080fd5b6120fb84828501611fd4565b6000602082840312156122c657600080fd5b60006120fb84846120c5565b6000602082840312156122e457600080fd5b60006120fb84846120d1565b600080600080600080600060e0888a03121561230b57600080fd5b60006123178a8a6120c5565b975050602088013567ffffffffffffffff81111561233457600080fd5b6123408a828b01611e59565b96505060406123518a828b016120c5565b95505060606123628a828b016120c5565b94505060806123738a828b016120c5565b93505060a06123848a828b016120c5565b92505060c06123958a828b016120c5565b91505092959891949750929550565b600080604083850312156123b757600080fd5b60006123c385856120c5565b9250506020612151858286016120c5565b60006123e083836127ae565b505060200190565b6123f181612b25565b82525050565b6123f181612af3565b600061240b82612ae6565b6124158185612aea565b935061242083612ae0565b60005b8281101561244b576124368683516123d4565b955061244182612ae0565b9150600101612423565b5093949350505050565b600061246082612ae6565b61246a8185612aea565b935061247583612ae0565b60005b8281101561244b5761248b8683516123d4565b955061249682612ae0565b9150600101612478565b6123f181612afe565b6123f181612b2c565b6123f181612b37565b60006124c78385612aea565b93506124d4838584612b42565b6124dd83612b7a565b9093019392505050565b60006124f282612ae6565b6124fc8185612aea565b935061250c818560208601612b4e565b6124dd81612b7a565b6000612522601883612aea565b7f307830206173206f776e6572206e6f7420616c6c6f7765640000000000000000815260200192915050565b600061255b601d83612aea565b7f737570706c792069732070617274206f6620616e206167726565656e74000000815260200192915050565b6000612594602483612aea565b7f7573657220646f6573206e6f742068617665207468652072657175697265642081527f726f6c6500000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006125f3601783612aea565b7f6d73672e73656e646572206973206e6f74206f776e6572000000000000000000815260200192915050565b600061262c601283612aea565b7f6e6f2061677265656d656e7420666f756e640000000000000000000000000000815260200192915050565b6000612665601983612aea565b7f746f6f206d75636820706f77657220666f722064656d616e6400000000000000815260200192915050565b600061269e601883612aea565b7f696e69743a20616c726561647920696e697469616c697a650000000000000000815260200192915050565b805160009060408401906126de85826127ae565b50602083015184820360208601526126f68282612455565b95945050505050565b8051610100808452600091908401906127188282612455565b9150506020830151848203602086015261273282826124e7565b915050604083015161274760408601826127ae565b50606083015161275a60608601826127ae565b50608083015161276d60808601826127ae565b5060a083015161278060a08601826127ae565b5060c083015161279360c08601826127ae565b5060e08301516127a660e08601826127ae565b509392505050565b6123f181612b0f565b60208101610bfd82846123f7565b60208101610bfd82846123e8565b61010080825281016127e5818b612400565b905081810360208301526127f9818a6124e7565b905061280860408301896127ae565b61281560608301886127ae565b61282260808301876127ae565b61282f60a08301866127ae565b61283c60c08301856124b2565b61284960e08301846127ae565b9998505050505050505050565b60208101610bfd82846124a0565b60208101610bfd82846124a9565b60a0808252810161288481888a6124bb565b905061289360208301876127ae565b6128a060408301866127ae565b6128ad60608301856127ae565b6128ba60808301846124b2565b979650505050505050565b60a080825281016128d681886124e7565b90506128e560208301876127ae565b6128f260408301866127ae565b6128ff60608301856127ae565b61290c60808301846127ae565b9695505050505050565b60208082528101610bfd81612515565b60208082528101610bfd8161254e565b60208082528101610bfd81612587565b60208082528101610bfd816125e6565b60208082528101610bfd8161261f565b60208082528101610bfd81612658565b60208082528101610bfd81612691565b6020808252810161155581846126ca565b6020808252810161155581846126ff565b60208101610bfd82846127ae565b604081016129c482856127ae565b61155560208301846123e8565b604081016129df82856127ae565b81810360208301526120fb8184612400565b6101008101612a00828b6127ae565b8181036020830152612a12818a6124e7565b9050612a2160408301896127ae565b612a2e60608301886127ae565b612a3b60808301876127ae565b612a4860a08301866127ae565b61283c60c08301856127ae565b60408101612a6382856127ae565b61155560208301846127ae565b60405181810167ffffffffffffffff81118282101715612a8f57600080fd5b604052919050565b600067ffffffffffffffff821115612aae57600080fd5b5060209081020190565b600067ffffffffffffffff821115612acf57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b90815260200190565b6000610bfd82612b03565b151590565b600160a060020a031690565b90565b600060068210612b2157600080fd5b5090565b6000610bfd825b6000610bfd82612af3565b6000610bfd82612b0f565b82818337506000910152565b60005b83811015612b69578181015183820152602001612b51565b8381111561066b5750506000910152565b601f01601f19169056fe08c379a000000000000000000000000000000000000000000000000000000000a265627a7a723058207958c7e15fa3b8b4f6d303ca101cc65e86bf09ed4a05b480d2256db7997314096c6578706572696d656e74616cf50037","source":"// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector,\n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH; Martin Kuechler, martin.kuchler@slock.it; Heiko Burkhardt, heiko.burkhardt@slock.it\n\npragma solidity ^0.5.2;\npragma experimental ABIEncoderV2;\n\nimport \"../../contracts/Trading/MarketDB.sol\";\nimport \"../../contracts/Trading/AgreementLogic.sol\";\nimport \"ew-asset-registry-contracts/contracts/Interfaces/SonnenAssetProducingInterface.sol\";\nimport \"../../contracts/Interfaces/MarketLogicInterface.sol\";\n\n/// @title The logic contract for the AgreementDB of Origin list\ncontract MarketLogic is AgreementLogic, MarketLogicInterface {\n\n    event createdNewDemand(address _sender, uint indexed _demandId);\n    event createdNewSupply(address _sender, uint indexed _supplyId);\n\n    /// @notice constructor\n    constructor(\n        AssetContractLookupInterface _assetContractLookup,\n        MarketContractLookupInterface _marketContractLookup\n    )\n        AgreementLogic(_assetContractLookup,_marketContractLookup)\n        public\n    {\n    }\n\n\t/// @notice Function to create a demand\n\t/// @dev will return an event with the event-Id\n   function createDemand\n    (\n        string calldata _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power\n    )\n        external\n        onlyRole(RoleManagement.Role.Trader)\n     {\n        uint demandID = db.createDemand(_regionId, _dateTimeFrom, _dateTimeTo, _power, 0);\n        emit createdNewDemand(msg.sender, demandID);\n    }\n\n\t/// @notice Function to create a supply\n\t/// @dev will return an event with the event-Id\n    function createSupply\n    (\n        uint _assetId,\n        string memory _regionId,\n        uint _dateTimeFrom,\n        uint _dateTimeTo,\n        uint _power,\n        uint _baselinePower,\n        uint _price\n    )\n        public\n     {\n        uint[] memory assetIdInternal = new uint[](1); \n        \n        assetIdInternal[0] = _assetId;         \n\n     //   require(AssetGeneralInterface(assetContractLookup.assetProducingRegistry()).getAssetOwner(_assetId) == msg.sender, \"wrong msg.sender\");\n        uint supplyID = db.createSupply(assetIdInternal, _regionId, _dateTimeFrom, _dateTimeTo, _power, _baselinePower, 0, _price);\n\n        for(uint i=0; i < assetIdInternal.length;i++){\n           SonnenAssetProducingInterface(assetContractLookup.assetProducingRegistry()).addSonnenAssetToSupply(assetIdInternal[i], supplyID);\n        }\n        emit createdNewSupply(msg.sender, supplyID);\n\n\n    }\n\n\t/// @notice function to return the length of the allDemands-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllDemandListLength() external view returns (uint) {\n        return db.getAllDemandListLength();\n    }\n\n\t/// @notice function to return the length of the allSupply-array in the database\n\t/// @return length of the allDemansa-array\n    function getAllSupplyListLength() external view returns (uint) {\n        return db.getAllSupplyListLength();\n    }\n\n\t/// @notice Returns the information of a demand\n\t/// @param _demandId index of the demand in the allDemands-array\n\t/// @return propertiesDocumentHash, documentDBURL and owner\n    function getDemand(uint _demandId)\n        external\n        view\n        returns (\n            string memory _regionId,\n            uint _dataTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _matchedPower\n        )\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n            _regionId = demand.regionId;\n            _dataTimeFrom = demand.dateTimeFrom;\n            _dateTimeTo = demand.dateTimeTo;\n            _power = demand.power;\n            _matchedPower = demand.matchedPower;\n    }\n\n    function getSupplyStruct(uint _supplyId) external view returns (MarketDB.Supply memory){\n        return db.getSupply(_supplyId);\n    }\n\n\n\t/// @notice gets a supply\n\t/// @param _supplyId the supply Id\n\t/// @return the supply\n    function getSupply(uint _supplyId)\n        public\n        view\n        returns (\n            uint _assetId,\n            string memory _regionId,\n            uint _dateTimeFrom,\n            uint _dateTimeTo,\n            uint _power,\n            uint _baselinePower,\n            uint _matchedPower,\n            uint _price\n        )\n    {\n        \n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n        _assetId = supply.assetId[0];\n        _regionId = supply.regionId;\n        _dateTimeFrom = supply.dateTimeFrom;\n        _dateTimeTo = supply.dateTimeTo; \n        _power = supply.power;\n        _baselinePower = supply.baselinePower;\n        _matchedPower = supply.matchedPower;\n        _price = supply.price;\n\n        \n    }\n\n    function setDemandMatchedPower(\n        uint _demandId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Demand memory demand = db.getDemand(_demandId);\n\n        // Overflow check\n        assert(demand.matchedPower + _power >= demand.matchedPower);\n        require(demand.matchedPower + _power <= demand.power,\"too much power for demand\");\n\n        db.setDemandMatchedPower(_demandId, _power);\n    }\n\n    function setSupplyMatchedPower(\n        uint _supplyId,\n        uint _power\n    )\n        external\n    {\n        MarketDB.Supply memory supply = db.getSupply(_supplyId);\n\n        // Overflow check\n        assert(supply.matchedPower + _power >= supply.matchedPower);\n\n        uint agreementId = getAgreementForSupplyPublic(_supplyId);\n        \n        uint demandId= db.getAgreementDB(agreementId).demandId;\n        MarketDB.Demand memory demand = db.getDemand(demandId);\n    \n        uint powerStillOpen = demand.power - demand.matchedPower; \n\n        if(powerStillOpen >= _power) {\n            db.setSupplyMatchedPower(_supplyId, supply.matchedPower +_power);\n        } else {\n            uint diff = _power - powerStillOpen;\n            uint matchedPower = _power - diff;\n            db.setSupplyMatchedPower(_supplyId,supply.matchedPower + matchedPower);\n        }\n    }\n\n    function getDemandForAgreement(uint _agreementId) external view returns (uint _demandId){\n         MarketDB.Agreement memory a = db.getAgreementDB(_agreementId);\n\n         return a.demandId;\n    }\n\n\n}\n","networks":"{}"}